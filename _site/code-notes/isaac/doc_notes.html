<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="stylesheet" href="/blog/assets/css/just-the-docs-default.css"> <link rel="stylesheet" href="/blog/assets/css/just-the-docs-head-nav.css" id="jtd-head-nav-stylesheet"> <style id="jtd-nav-activation"> .site-nav > ul.nav-list:first-child > li > a, .site-nav > ul.nav-list:first-child > li > ul > li > a, .site-nav > ul.nav-list:first-child > li > ul > li > ul > li:not(:nth-child(2)) > a, .site-nav > ul.nav-list:first-child > li > ul > li > ul > li > ul > li a { background-image: none; } .site-nav > ul.nav-list:not(:first-child) a, .site-nav li.external a { background-image: none; } .site-nav > ul.nav-list:first-child > li:nth-child(1) > ul > li:nth-child(8) > ul > li:nth-child(2) > a { font-weight: 600; text-decoration: none; }.site-nav > ul.nav-list:first-child > li:nth-child(1) > button svg, .site-nav > ul.nav-list:first-child > li:nth-child(1) > ul > li:nth-child(8) > button svg, .site-nav > ul.nav-list:first-child > li:nth-child(1) > ul > li:nth-child(8) > ul > li:nth-child(2) > button svg { transform: rotate(-90deg); }.site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(1) > ul.nav-list, .site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(1) > ul.nav-list > li.nav-list-item:nth-child(8) > ul.nav-list, .site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(1) > ul.nav-list > li.nav-list-item:nth-child(8) > ul.nav-list > li.nav-list-item:nth-child(2) > ul.nav-list { display: block; } </style> <script src="/blog/assets/js/vendor/lunr.min.js"></script> <script src="/blog/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>Isaac Gym Doc Notes | Notes</title> <meta name="generator" content="Jekyll v4.2.2" /> <meta property="og:title" content="Isaac Gym Doc Notes" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Just messing around right now" /> <meta property="og:description" content="Just messing around right now" /> <link rel="canonical" href="http://localhost:4000/blog/code-notes/isaac/doc_notes.html" /> <meta property="og:url" content="http://localhost:4000/blog/code-notes/isaac/doc_notes.html" /> <meta property="og:site_name" content="Notes" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Isaac Gym Doc Notes" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"Just messing around right now","headline":"Isaac Gym Doc Notes","url":"http://localhost:4000/blog/code-notes/isaac/doc_notes.html"}</script> <!-- End Jekyll SEO tag --> <link rel="icon" href="data:,"> </head> <body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" class="d-none"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <!-- Feather. MIT License: https://github.com/feathericons/feather/blob/master/LICENSE --> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"> <title id="svg-external-link-title">(external link)</title> <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <!-- Bootstrap Icons. MIT License: https://github.com/twbs/icons/blob/main/LICENSE.md --> <symbol id="svg-copy" viewBox="0 0 16 16"> <title>Copy</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16"> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/> <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/> </svg> </symbol> <symbol id="svg-copied" viewBox="0 0 16 16"> <title>Copied</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-check-fill" viewBox="0 0 16 16"> <path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"/> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"/> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header" role="banner"> <a href="/blog/" class="site-title lh-tight"> Notes </a> <button id="menu-button" class="site-button btn-reset" aria-label="Toggle menu" aria-pressed="false"> <svg viewBox="0 0 24 24" class="icon" aria-hidden="true"><use xlink:href="#svg-menu"></use></svg> </button> </div> <nav aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Code Notes category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/blog/code-notes/" class="nav-list-link">Code Notes</a><ul class="nav-list"><li class="nav-list-item"><a href="/blog/code-notes/how-to-pdb.html" class="nav-list-link">How-to PDB</a></li><li class="nav-list-item"><a href="/blog/code-notes/how-to-tmux.html" class="nav-list-link">How-to Tmux</a></li><li class="nav-list-item"><a href="/blog/code-notes/distributed-dl.html" class="nav-list-link">Distributed Notes</a></li><li class="nav-list-item"><a href="/blog/code-notes/image-augmentation.html" class="nav-list-link">Image Augmentation (Torchvision)</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Benchmarks category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/blog/code-notes/benchmark-notes/" class="nav-list-link">Benchmarks</a><ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Robocasa category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/blog/code-notes/benchmark-notes/robocasa/" class="nav-list-link">Robocasa</a><ul class="nav-list"><li class="nav-list-item"><a href="/blog/code-notes/benchmark-notes/robocasa/paper.html" class="nav-list-link">Paper</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Libero category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/blog/code-notes/benchmark-notes/libero/" class="nav-list-link">Libero</a><ul class="nav-list"><li class="nav-list-item"><a href="/blog/code-notes/benchmark-notes/libero/paper.html" class="nav-list-link">Paper</a></li><li class="nav-list-item"><a href="/blog/code-notes/benchmark-notes/libero/code.html" class="nav-list-link">Code</a></li></ul></li><li class="nav-list-item"><a href="/blog/code-notes/benchmark-notes/robomimic.html" class="nav-list-link">Robomimic</a></li></ul></li><li class="nav-list-item"><a href="/blog/code-notes/python-env.html" class="nav-list-link">Python Environments</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in GROOT category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/blog/code-notes/groot/" class="nav-list-link">GROOT</a><ul class="nav-list"><li class="nav-list-item"><a href="/blog/code-notes/groot/code.html" class="nav-list-link">Code</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Isaac category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/blog/code-notes/isaac/" class="nav-list-link">Isaac</a><ul class="nav-list"><li class="nav-list-item"><a href="/blog/code-notes/isaac/setup.html" class="nav-list-link">Isaac Setup</a></li><li class="nav-list-item"><a href="/blog/code-notes/isaac/doc_notes.html" class="nav-list-link">Isaac Gym Doc Notes</a></li><li class="nav-list-item"><a href="/blog/code-notes/isaac/gymenv-obs.html" class="nav-list-link">IsaacGymEnv Obs Notes</a></li><li class="nav-list-item"><a href="/blog/code-notes/isaac/gymenv-cam.html" class="nav-list-link">IsaacGymEnv Camera Notes</a></li><li class="nav-list-item"><a href="/blog/code-notes/isaac/gymenv-network.html" class="nav-list-link">IsaacGymEnv Network Notes</a></li><li class="nav-list-item"><a href="/blog/code-notes/isaac/gymenv-tacsl.html" class="nav-list-link">IsaacGymEnv Tacsl Notes</a></li><li class="nav-list-item"><a href="/blog/code-notes/isaac/gymenv-assets.html" class="nav-list-link">IsaacGymEnv Assets Notes</a></li><li class="nav-list-item"><a href="/blog/code-notes/isaac/gymenv-env.html" class="nav-list-link">IsaacGymEnv Env Notes</a></li><li class="nav-list-item"><a href="/blog/code-notes/isaac/gymenv-task.html" class="nav-list-link">IsaacGymEnv Task Notes</a></li><li class="nav-list-item"><a href="/blog/code-notes/isaac/rl_games_integration.html" class="nav-list-link">RL Games Coupling</a></li><li class="nav-list-item"><a href="/blog/code-notes/isaac/setup_isaacgymenvs.html" class="nav-list-link">IsaacGymEnvs Setup</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Cluster Notes category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/blog/code-notes/cluster-notes/" class="nav-list-link">Cluster Notes</a><ul class="nav-list"><li class="nav-list-item"><a href="/blog/code-notes/cluster-notes/great-lakes.html" class="nav-list-link">Great Lakes Cluster</a></li><li class="nav-list-item"><a href="/blog/code-notes/cluster-notes/slurm-interactive.html" class="nav-list-link">SLURM Interactive</a></li><li class="nav-list-item"><a href="/blog/code-notes/cluster-notes/slurm.html" class="nav-list-link">SLURM</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Isaac Lab category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/blog/code-notes/isaaclab/" class="nav-list-link">Isaac Lab</a><ul class="nav-list"><li class="nav-list-item"><a href="/blog/code-notes/isaaclab/setup.html" class="nav-list-link">Isaac Lab Setup</a></li><li class="nav-list-item"><a href="/blog/code-notes/isaaclab/isaacsim-start.html" class="nav-list-link">Isaac Sim Python Start</a></li><li class="nav-list-item"><a href="/blog/code-notes/isaaclab/isaacsim-hello-world.html" class="nav-list-link">IsaacSim Core (Hello World)</a></li></ul></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Conference Notes category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/blog/conference-notes/" class="nav-list-link">Conference Notes</a><ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in ICRA 2025 category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/blog/conference-notes/icra-2025/" class="nav-list-link">ICRA 2025</a><ul class="nav-list"><li class="nav-list-item"><a href="/blog/conference-notes/icra-2025/workshop/beyond-pick-place.html" class="nav-list-link">Beyond Pick and Place Workshop</a></li><li class="nav-list-item"><a href="/blog/conference-notes/icra-2025/workshop/contact-rich.html" class="nav-list-link">Contact Rich Workshop</a></li><li class="nav-list-item"><a href="/blog/conference-notes/icra-2025/workshop/handy.html" class="nav-list-link">Handy Workshop</a></li><li class="nav-list-item"><a href="/blog/conference-notes/icra-2025/homework.html" class="nav-list-link">Homework</a></li><li class="nav-list-item"><a href="/blog/conference-notes/icra-2025/keynote-manipulation.html" class="nav-list-link">Manipulation Keynote</a></li><li class="nav-list-item"><a href="/blog/conference-notes/icra-2025/keynote-opt.html" class="nav-list-link">Optimization Control Keynote</a></li><li class="nav-list-item"><a href="/blog/conference-notes/icra-2025/workshop/neuro-symbolic.html" class="nav-list-link">Neuro-Symbolic Workshop</a></li><li class="nav-list-item"><a href="/blog/conference-notes/icra-2025/workshop/space.html" class="nav-list-link">Space Workshop</a></li></ul></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Class Notes category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/blog/class-notes/" class="nav-list-link">Class Notes</a><ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in MATH 658: Geometric Mechanics category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/blog/class-notes/00-Geometric-Mechanics/" class="nav-list-link">MATH 658: Geometric Mechanics</a><ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in 658-Lectures category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/blog/class-notes/00-Geometric-Mechanics/Lectures/" class="nav-list-link">658-Lectures</a><ul class="nav-list"><li class="nav-list-item"><a href="/blog/class-notes/00-Geometric-Mechanics/Lectures/08-27.html" class="nav-list-link">August 27</a></li><li class="nav-list-item"><a href="/blog/class-notes/00-Geometric-Mechanics/Lectures/09-03.html" class="nav-list-link">September 3</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Textbook category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/blog/class-notes/00-Geometric-Mechanics/Textbook/" class="nav-list-link">Textbook</a><ul class="nav-list"><li class="nav-list-item"><a href="/blog/class-notes/00-Geometric-Mechanics/Textbook/diff-manifold.html" class="nav-list-link">Differentiable Manifold (2.2)</a></li><li class="nav-list-item"><a href="/blog/class-notes/00-Geometric-Mechanics/Textbook/variational-mech.html" class="nav-list-link">Variational Mechanics (1.2 - 1.3)</a></li><li class="nav-list-item"><a href="/blog/class-notes/00-Geometric-Mechanics/Textbook/vector-fields.html" class="nav-list-link">Vector Fields (2.1)</a></li></ul></li></ul></li><li class="nav-list-item"><a href="/blog/class-notes/01-Math-of-Bio-Networks/" class="nav-list-link">MATH 540: Mathematics for Biological Networks</a></li><li class="nav-list-item"><a href="/blog/class-notes/02-Online-Learning-Control/" class="nav-list-link">AEROSP 740: Online Learning for Control</a></li><li class="nav-list-item"><a href="/blog/class-notes/03-CVOPT-Control/" class="nav-list-link">ECE 598: Convex Optimization Methods in Control</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Sensorimotor Learning category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/blog/class-notes/04-Computational-Sensorimotor-Learning/" class="nav-list-link">Sensorimotor Learning</a><ul class="nav-list"><li class="nav-list-item"><a href="/blog/class-notes/04-Computational-Sensorimotor-Learning/simple-decision.html" class="nav-list-link">1. Simple Decisions</a></li><li class="nav-list-item"><a href="/blog/class-notes/04-Computational-Sensorimotor-Learning/sequential-decision.html" class="nav-list-link">2. Sequential Decisions</a></li><li class="nav-list-item"><a href="/blog/class-notes/04-Computational-Sensorimotor-Learning/policy-grad.html" class="nav-list-link">3. Policy Gradients</a></li><li class="nav-list-item"><a href="/blog/class-notes/04-Computational-Sensorimotor-Learning/reward-function.html" class="nav-list-link">4. Reward Function</a></li><li class="nav-list-item"><a href="/blog/class-notes/04-Computational-Sensorimotor-Learning/learning-from-demo.html" class="nav-list-link">5. Learning Demos</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Unsupervised Learning category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/blog/class-notes/05-Unsupervised-Learning/" class="nav-list-link">Unsupervised Learning</a><ul class="nav-list"><li class="nav-list-item"><a href="/blog/class-notes/05-Unsupervised-Learning/1_autoregressive.html" class="nav-list-link">1. Autoregressive</a></li><li class="nav-list-item"><a href="/blog/class-notes/05-Unsupervised-Learning/2_flow.html" class="nav-list-link">2. Flow</a></li><li class="nav-list-item"><a href="/blog/class-notes/05-Unsupervised-Learning/3_lvm.html" class="nav-list-link">3. Latent Variable Models</a></li><li class="nav-list-item"><a href="/blog/class-notes/05-Unsupervised-Learning/3a_lvm.html" class="nav-list-link">3a. LVM Papers</a></li><li class="nav-list-item"><a href="/blog/class-notes/05-Unsupervised-Learning/4_implicit_sample.html" class="nav-list-link">4. Implicit Models</a></li><li class="nav-list-item"><a href="/blog/class-notes/05-Unsupervised-Learning/5_diffusion.html" class="nav-list-link">5. Diffusion</a></li><li class="nav-list-item"><a href="/blog/class-notes/05-Unsupervised-Learning/5a_diffusion.html" class="nav-list-link">5a. Diffusion Papers</a></li><li class="nav-list-item"><a href="/blog/class-notes/05-Unsupervised-Learning/6_self_supervised.html" class="nav-list-link">6. Self-Supervised Learning</a></li></ul></li><li class="nav-list-item"><a href="/blog/class-notes/06-Flow-Matching/" class="nav-list-link">Flow Matching and Diffusion</a></li><li class="nav-list-item"><a href="/blog/class-notes/07-Deep-RL/" class="nav-list-link">Deep Reinforcement Learning</a></li><li class="nav-list-item"><a href="/blog/class-notes/08-Deep-Multitask-Learning/" class="nav-list-link">Deep Multi-Task and Meta Learning</a></li><li class="nav-list-item"><a href="/blog/class-notes/09-Algebraic-Techniques-Optimization/" class="nav-list-link">Algebraic Techniques for Optimization</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Deep Dive Ideas category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/blog/deep-dive-notes/" class="nav-list-link">Deep Dive Ideas</a><ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Debug Point ML category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/blog/deep-dive-notes/debug-point-ml/" class="nav-list-link">Debug Point ML</a><ul class="nav-list"><li class="nav-list-item"><a href="/blog/deep-dive-notes/debug-point-ml/pointnet.html" class="nav-list-link">PointNet</a></li><li class="nav-list-item"><a href="/blog/deep-dive-notes/debug-point-ml/spatial-transformer.html" class="nav-list-link">Spatial Transformer Networks</a></li></ul></li><li class="nav-list-item"><a href="/blog/deep-dive-notes/limit-surface/" class="nav-list-link">Limit Surface Planner</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Tactile RL Notes category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/blog/deep-dive-notes/tactile-rl-notes/" class="nav-list-link">Tactile RL Notes</a><ul class="nav-list"><li class="nav-list-item"><a href="/blog/deep-dive-notes/tactile-rl-notes/fots.html" class="nav-list-link">FOTS</a></li><li class="nav-list-item"><a href="/blog/deep-dive-notes/tactile-rl-notes/roadmap-rl.html" class="nav-list-link">Roadmap to RL</a></li><li class="nav-list-item"><a href="/blog/deep-dive-notes/tactile-rl-notes/roadmap-tactile-rl.html" class="nav-list-link">Roadmap to Tactile RL</a></li><li class="nav-list-item"><a href="/blog/deep-dive-notes/tactile-rl-notes/sim2real-tactile-rl.html" class="nav-list-link">Sim2real Tactile RL</a></li><li class="nav-list-item"><a href="/blog/deep-dive-notes/tactile-rl-notes/tacsl.html" class="nav-list-link">TacSL</a></li><li class="nav-list-item"><a href="/blog/deep-dive-notes/tactile-rl-notes/taxim.html" class="nav-list-link">Taxim</a></li></ul></li></ul></li><li class="nav-list-item"><a href="/blog/paper-notes/" class="nav-list-link">Deep Dive Papers</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Judo Notes category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/blog/judo-notes/" class="nav-list-link">Judo Notes</a><ul class="nav-list"><li class="nav-list-item"><a href="/blog/judo-notes/taught.html" class="nav-list-link">Taught Moves</a></li><li class="nav-list-item"><a href="/blog/judo-notes/tolearn.html" class="nav-list-link">To Learn</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Kuka FRI Notes category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/blog/kuka-notes/" class="nav-list-link">Kuka FRI Notes</a><ul class="nav-list"><li class="nav-list-item"><a href="/blog/kuka-notes/code.html" class="nav-list-link">Code</a></li><li class="nav-list-item"><a href="/blog/kuka-notes/setup.html" class="nav-list-link">Setup FRI</a></li></ul></li><li class="nav-list-item"><a href="/blog/ml-git-gud-notes/" class="nav-list-link">ML (Git Gud) Resources</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in PhD Project Notes category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/blog/project-notes/" class="nav-list-link">PhD Project Notes</a><ul class="nav-list"><li class="nav-list-item"><a href="/blog/project-notes/hand-notes.html" class="nav-list-link">Hand Notes</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Graph Insertion category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/blog/project-notes/project1/" class="nav-list-link">Graph Insertion</a><ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Lit Review (Graph Insertion) category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/blog/project-notes/project1/lit_review/" class="nav-list-link">Lit Review (Graph Insertion)</a><ul class="nav-list"><li class="nav-list-item"><a href="/blog/project-notes/project1/lit_review/robopack.html" class="nav-list-link">Robopack</a></li><li class="nav-list-item"><a href="/blog/project-notes/project1/lit_review/tactile-control-extrinsic.html" class="nav-list-link">Extrinsic Contact Control</a></li></ul></li><li class="nav-list-item"><a href="/blog/project-notes/project1/math.html" class="nav-list-link">Math Notes</a></li><li class="nav-list-item"><a href="/blog/project-notes/project1/project.html" class="nav-list-link">Point RL</a></li></ul></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Prerequisites category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/blog/prereq-notes/" class="nav-list-link">Prerequisites</a><ul class="nav-list"><li class="nav-list-item"><a href="/blog/prereq-notes/calc-variation.html" class="nav-list-link">Calculus of Variations - Chill</a></li><li class="nav-list-item"><a href="/blog/prereq-notes/calc-variation2.html" class="nav-list-link">Calculus of Variations - Serious</a></li><li class="nav-list-item"><a href="/blog/prereq-notes/groups.html" class="nav-list-link">GDL 1: Groups</a></li><li class="nav-list-item"><a href="/blog/prereq-notes/topology.html" class="nav-list-link">GDL 2: Topology</a></li><li class="nav-list-item"><a href="/blog/prereq-notes/manifolds.html" class="nav-list-link">GDL 3: Manifolds</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Quick Notes on Graphs category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/blog/graph-notes/" class="nav-list-link">Quick Notes on Graphs</a><ul class="nav-list"><li class="nav-list-item"><a href="/blog/graph-notes/advective-diff.html" class="nav-list-link">Advective Diffusion</a></li><li class="nav-list-item"><a href="/blog/graph-notes/beyond-wl.html" class="nav-list-link">Beyond WL-test</a></li><li class="nav-list-item"><a href="/blog/graph-notes/wl-test-gnn.html" class="nav-list-link">GNN WL-test</a></li><li class="nav-list-item"><a href="/blog/graph-notes/gnn-grad-flow.html" class="nav-list-link">GNN as Gradient Flow</a></li><li class="nav-list-item"><a href="/blog/graph-notes/gnn-pde.html" class="nav-list-link">GNNs as PDEs</a></li><li class="nav-list-item"><a href="/blog/graph-notes/graph-rewiring.html" class="nav-list-link">Graph Rewiring</a></li><li class="nav-list-item"><a href="/blog/graph-notes/latent-gnn.html" class="nav-list-link">Latent GNNs</a></li><li class="nav-list-item"><a href="/blog/graph-notes/neural-sheaf-diffusion.html" class="nav-list-link">Neural Sheaf Diffusion</a></li><li class="nav-list-item"><a href="/blog/graph-notes/deep-gnn.html" class="nav-list-link">Scaling GNNs</a></li><li class="nav-list-item"><a href="/blog/graph-notes/temporal-gnn.html" class="nav-list-link">Temporal GNNs</a></li></ul></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search" role="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Notes" aria-label="Search Notes" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> </div> <div class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="/blog/code-notes/">Code Notes</a></li> <li class="breadcrumb-nav-list-item"><a href="/blog/code-notes/isaac/">Isaac</a></li> <li class="breadcrumb-nav-list-item"><span>Isaac Gym Doc Notes</span></li> </ol> </nav> <div id="main-content" class="main-content"> <main> <h1 id="isaac-gym-notes-for-an"> <a href="#isaac-gym-notes-for-an" class="anchor-heading" aria-labelledby="isaac-gym-notes-for-an"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Isaac Gym Notes (for An) </h1> <p>This is the breakdown of the Isaac Gym codebase. Here are important links:</p> <ul> <li><a href="https://docs.robotsfan.com/isaacgym/">Documentation</a></li> <li><a href="https://forums.developer.nvidia.com/c/robotics-edge-computing/isaac/isaac-gym/322">IsaacGym Forum</a></li> </ul><hr /> <h2 id="vectorized-environments"> <a href="#vectorized-environments" class="anchor-heading" aria-labelledby="vectorized-environments"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Vectorized Environments </h2> <p>IsaacGym environments are vectorized environments. This means they can run multiple environments in parallel. For us, this means that it follows the OpenAI Gym API for vectorized environments:</p> <p>Here’s example code from IsaacGymEnvs:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">isaacgym</span>
<span class="kn">import</span> <span class="nn">isaacgymenvs</span>
<span class="kn">import</span> <span class="nn">torch</span>

<span class="n">num_envs</span> <span class="o">=</span> <span class="mi">2000</span>

<span class="n">envs</span> <span class="o">=</span> <span class="n">isaacgymenvs</span><span class="p">.</span><span class="n">make</span><span class="p">(</span>
	<span class="n">seed</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> 
	<span class="n">task</span><span class="o">=</span><span class="s">"Ant"</span><span class="p">,</span> 
	<span class="n">num_envs</span><span class="o">=</span><span class="n">num_envs</span><span class="p">,</span> 
	<span class="n">sim_device</span><span class="o">=</span><span class="s">"cuda:0"</span><span class="p">,</span>
	<span class="n">rl_device</span><span class="o">=</span><span class="s">"cuda:0"</span><span class="p">,</span>
<span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Observation space is"</span><span class="p">,</span> <span class="n">envs</span><span class="p">.</span><span class="n">observation_space</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Action space is"</span><span class="p">,</span> <span class="n">envs</span><span class="p">.</span><span class="n">action_space</span><span class="p">)</span>
<span class="n">obs</span> <span class="o">=</span> <span class="n">envs</span><span class="p">.</span><span class="n">reset</span><span class="p">()</span>
<span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">20</span><span class="p">):</span>
	<span class="n">random_actions</span> <span class="o">=</span> <span class="mf">2.0</span> <span class="o">*</span> <span class="n">torch</span><span class="p">.</span><span class="n">rand</span><span class="p">((</span><span class="n">num_envs</span><span class="p">,)</span> <span class="o">+</span> <span class="n">envs</span><span class="p">.</span><span class="n">action_space</span><span class="p">.</span><span class="n">shape</span><span class="p">,</span> <span class="n">device</span> <span class="o">=</span> <span class="s">'cuda:0'</span><span class="p">)</span> <span class="o">-</span> <span class="mf">1.0</span>
	<span class="n">envs</span><span class="p">.</span><span class="n">step</span><span class="p">(</span><span class="n">random_actions</span><span class="p">)</span>
</code></pre></div></div> <p>Here’s another example from the Gym API site:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">envs</span> <span class="o">=</span> <span class="n">gym</span><span class="p">.</span><span class="n">vector</span><span class="p">.</span><span class="n">make</span><span class="p">(</span><span class="s">"CartPole-v1"</span><span class="p">,</span> <span class="n">num_envs</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="n">envs</span><span class="p">.</span><span class="n">reset</span><span class="p">()</span>
<span class="n">actions</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
<span class="n">observations</span><span class="p">,</span> <span class="n">rewards</span><span class="p">,</span> <span class="n">dones</span><span class="p">,</span> <span class="n">infos</span> <span class="o">=</span> <span class="n">envs</span><span class="p">.</span><span class="n">step</span><span class="p">(</span><span class="n">actions</span><span class="p">)</span>
</code></pre></div></div> <p>Here’s an example implementation of a Gym Environment:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">DictEnv</span><span class="p">(</span><span class="n">gym</span><span class="p">.</span><span class="n">Env</span><span class="p">):</span>
    <span class="n">observation_space</span> <span class="o">=</span> <span class="n">gym</span><span class="p">.</span><span class="n">spaces</span><span class="p">.</span><span class="n">Dict</span><span class="p">({</span>
        <span class="s">"position"</span><span class="p">:</span> <span class="n">gym</span><span class="p">.</span><span class="n">spaces</span><span class="p">.</span><span class="n">Box</span><span class="p">(</span><span class="o">-</span><span class="mf">1.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">,</span> <span class="p">(</span><span class="mi">3</span><span class="p">,),</span> <span class="n">np</span><span class="p">.</span><span class="n">float32</span><span class="p">),</span>
        <span class="s">"velocity"</span><span class="p">:</span> <span class="n">gym</span><span class="p">.</span><span class="n">spaces</span><span class="p">.</span><span class="n">Box</span><span class="p">(</span><span class="o">-</span><span class="mf">1.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">,</span> <span class="p">(</span><span class="mi">2</span><span class="p">,),</span> <span class="n">np</span><span class="p">.</span><span class="n">float32</span><span class="p">)</span>
    <span class="p">})</span>
    <span class="n">action_space</span> <span class="o">=</span> <span class="n">gym</span><span class="p">.</span><span class="n">spaces</span><span class="p">.</span><span class="n">Dict</span><span class="p">({</span>
        <span class="s">"fire"</span><span class="p">:</span> <span class="n">gym</span><span class="p">.</span><span class="n">spaces</span><span class="p">.</span><span class="n">Discrete</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span>
        <span class="s">"jump"</span><span class="p">:</span> <span class="n">gym</span><span class="p">.</span><span class="n">spaces</span><span class="p">.</span><span class="n">Discrete</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span>
        <span class="s">"acceleration"</span><span class="p">:</span> <span class="n">gym</span><span class="p">.</span><span class="n">spaces</span><span class="p">.</span><span class="n">Box</span><span class="p">(</span><span class="o">-</span><span class="mf">1.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">,</span> <span class="p">(</span><span class="mi">2</span><span class="p">,),</span> <span class="n">np</span><span class="p">.</span><span class="n">float32</span><span class="p">)</span>
    <span class="p">})</span>

    <span class="k">def</span> <span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="p">.</span><span class="n">observation_space</span><span class="p">.</span><span class="n">sample</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">step</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">action</span><span class="p">):</span>
        <span class="n">observation</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">observation_space</span><span class="p">.</span><span class="n">sample</span><span class="p">()</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">observation</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="p">{})</span>
</code></pre></div></div> <p>no extra methods are needed. We mainly focus on <code class="language-plaintext highlighter-rouge">reset</code> and <code class="language-plaintext highlighter-rouge">step</code> and make sure we define <code class="language-plaintext highlighter-rouge">observation_space</code> and <code class="language-plaintext highlighter-rouge">action_space</code> correctly.</p><hr /> <h2 id="1-simulation-setup"> <a href="#1-simulation-setup" class="anchor-heading" aria-labelledby="1-simulation-setup"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1. Simulation Setup </h2> <h3 id="11-gym"> <a href="#11-gym" class="anchor-heading" aria-labelledby="11-gym"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1.1 Gym </h3> <p>CoreAPI is located in <code class="language-plaintext highlighter-rouge">isaacgym.gymapi'. All Gym API functions are accessed by </code>Gym` object acquired by the following code:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">isaacgym</span> <span class="kn">import</span> <span class="n">gymapi</span>
<span class="n">gym</span> <span class="o">=</span> <span class="n">gymapi</span><span class="p">.</span><span class="n">acquire_gym</span><span class="p">()</span>
</code></pre></div></div> <h3 id="12-sim"> <a href="#12-sim" class="anchor-heading" aria-labelledby="12-sim"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1.2 Sim </h3> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">sim_params</span> <span class="o">=</span> <span class="n">gymapi</span><span class="p">.</span><span class="n">SimParams</span><span class="p">()</span>
<span class="n">sim</span> <span class="o">=</span> <span class="n">gym</span><span class="p">.</span><span class="n">create_sim</span><span class="p">(</span>
    <span class="n">compute_device_id</span><span class="p">,</span>
    <span class="n">graphics_device_id</span><span class="p">,</span>
    <span class="n">gymapi</span><span class="p">.</span><span class="n">SIM_PHYSX</span><span class="p">,</span>
    <span class="n">sim_params</span>
<span class="p">)</span>
</code></pre></div></div> <p>we use <code class="language-plaintext highlighter-rouge">create_sim</code> to create a simulation which contains graphics context and physics context. Allows us to load assets, create environments, and interact with simulation.</p> <p>We have two choices for simulation:</p> <ul> <li><code class="language-plaintext highlighter-rouge">gymapi.SIM_PHYSX</code> - PhysX simulation: robust rigid body and articulation (CPU/GPU) with new tensor api support.</li> <li><code class="language-plaintext highlighter-rouge">gymapi.SIM_FLEX</code> - Flex simulation: soft body and rigid body simulation (GPU only) does not fully support new tensor api.</li> </ul> <h3 id="13-simulation-parameters"> <a href="#13-simulation-parameters" class="anchor-heading" aria-labelledby="13-simulation-parameters"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1.3 Simulation Parameters </h3> <p>This is how to configure the simulation parameters:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># get default set of parameters
</span><span class="n">sim_params</span> <span class="o">=</span> <span class="n">gymapi</span><span class="p">.</span><span class="n">SimParams</span><span class="p">()</span>

<span class="c1"># set common params
</span><span class="n">sim_params</span><span class="p">.</span><span class="n">dt</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">/</span> <span class="mi">60</span>
<span class="n">sim_params</span><span class="p">.</span><span class="n">substeps</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">sim_params</span><span class="p">.</span><span class="n">up_axis</span> <span class="o">=</span> <span class="n">gymapi</span><span class="p">.</span><span class="n">UP_AXIS_Z</span>
<span class="n">sim_params</span><span class="p">.</span><span class="n">gravity</span> <span class="o">=</span> <span class="n">gymapi</span><span class="p">.</span><span class="n">Vec3</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">9.8</span><span class="p">)</span>

<span class="c1"># set PhysX specific params
</span><span class="n">sim_params</span><span class="p">.</span><span class="n">physx</span><span class="p">.</span><span class="n">use_gpu</span> <span class="o">=</span> <span class="bp">True</span>
<span class="n">sim_params</span><span class="p">.</span><span class="n">physx</span><span class="p">.</span><span class="n">solver_type</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">sim_params</span><span class="p">.</span><span class="n">physx</span><span class="p">.</span><span class="n">num_position_iterations</span> <span class="o">=</span> <span class="mi">6</span>
<span class="n">sim_params</span><span class="p">.</span><span class="n">physx</span><span class="p">.</span><span class="n">num_velocity_iterations</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">sim_params</span><span class="p">.</span><span class="n">physx</span><span class="p">.</span><span class="n">contact_offset</span> <span class="o">=</span> <span class="mf">0.01</span>
<span class="n">sim_params</span><span class="p">.</span><span class="n">physx</span><span class="p">.</span><span class="n">rest_offset</span> <span class="o">=</span> <span class="mf">0.0</span>

<span class="c1"># set Flex specific params
</span><span class="n">sim_params</span><span class="p">.</span><span class="n">flex</span><span class="p">.</span><span class="n">solver_type</span> <span class="o">=</span> <span class="mi">5</span>
<span class="n">sim_params</span><span class="p">.</span><span class="n">flex</span><span class="p">.</span><span class="n">num_outer_iterations</span> <span class="o">=</span> <span class="mi">4</span>
<span class="n">sim_params</span><span class="p">.</span><span class="n">flex</span><span class="p">.</span><span class="n">num_inner_iterations</span> <span class="o">=</span> <span class="mi">20</span>
<span class="n">sim_params</span><span class="p">.</span><span class="n">flex</span><span class="p">.</span><span class="n">num_position_iterations</span> <span class="o">=</span> <span class="mi">4</span>
<span class="n">sim_params</span><span class="p">.</span><span class="n">flex</span><span class="p">.</span><span class="n">relaxation</span> <span class="o">=</span> <span class="mf">0.8</span>
<span class="n">sim_params</span><span class="p">.</span><span class="n">flex</span><span class="p">.</span><span class="n">warm_start</span> <span class="o">=</span> <span class="mf">0.5</span>

<span class="n">sim</span> <span class="o">=</span> <span class="n">gym</span><span class="p">.</span><span class="n">create_sim</span><span class="p">(</span>
    <span class="n">compute_device_id</span><span class="p">,</span>
    <span class="n">graphics_device_id</span><span class="p">,</span>
    <span class="n">gymapi</span><span class="p">.</span><span class="n">SIM_PHYSX</span><span class="p">,</span>
    <span class="n">sim_params</span>
<span class="p">)</span>
</code></pre></div></div> <h3 id="14-ground-plane"> <a href="#14-ground-plane" class="anchor-heading" aria-labelledby="14-ground-plane"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1.4 Ground Plane </h3> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">plane_params</span> <span class="o">=</span> <span class="n">gymapi</span><span class="p">.</span><span class="n">PlaneParams</span><span class="p">()</span>
<span class="n">plane_params</span><span class="p">.</span><span class="n">normal</span> <span class="o">=</span> <span class="n">gymapi</span><span class="p">.</span><span class="n">Vec3</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span> <span class="c1"># z-up
</span><span class="n">plane_params</span><span class="p">.</span><span class="n">distance</span> <span class="o">=</span> <span class="mf">0.0</span>
<span class="n">plane_params</span><span class="p">.</span><span class="n">static_friction</span> <span class="o">=</span> <span class="mf">1.0</span>
<span class="n">plane_params</span><span class="p">.</span><span class="n">dynamic_friction</span> <span class="o">=</span> <span class="mf">1.0</span>
<span class="n">plane_params</span><span class="p">.</span><span class="n">restitution</span> <span class="o">=</span> <span class="mf">0.0</span>

<span class="n">gym</span><span class="p">.</span><span class="n">add_ground</span><span class="p">(</span><span class="n">sim</span><span class="p">,</span> <span class="n">plane_params</span><span class="p">)</span>
</code></pre></div></div> <h3 id="15-load-assets"> <a href="#15-load-assets" class="anchor-heading" aria-labelledby="15-load-assets"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1.5 Load Assets </h3> <p>Gym supports URDF and MJCF file formats. Here’s a quick way to load those files into a simulation:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">asset_root</span> <span class="o">=</span> <span class="s">"../../assets"</span>
<span class="n">asset_file</span> <span class="o">=</span> <span class="s">"urdf/franka_description/robots/franka_panda.urdf"</span>
<span class="n">asset</span> <span class="o">=</span> <span class="n">gym</span><span class="p">.</span><span class="n">load_asset</span><span class="p">(</span><span class="n">sim</span><span class="p">,</span> <span class="n">asset_root</span><span class="p">,</span> <span class="n">asset_file</span><span class="p">)</span>
</code></pre></div></div> <p>The <code class="language-plaintext highlighter-rouge">load_asset</code> function uses the file name extension to determine which processing code to use. We can also pass extra information to the asset importer:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">asset_options</span> <span class="o">=</span> <span class="n">gymapi</span><span class="p">.</span><span class="n">AssetOptions</span><span class="p">()</span>
<span class="n">asset_options</span><span class="p">.</span><span class="n">fix_base_link</span> <span class="o">=</span> <span class="bp">True</span>
<span class="n">asset_options</span><span class="p">.</span><span class="n">armature</span> <span class="o">=</span> <span class="mf">0.01</span>
<span class="n">asset</span> <span class="o">=</span> <span class="n">gym</span><span class="p">.</span><span class="n">load_asset</span><span class="p">(</span><span class="n">sim</span><span class="p">,</span> <span class="n">asset_root</span><span class="p">,</span> <span class="n">asset_file</span><span class="p">,</span> <span class="n">asset_options</span><span class="p">)</span>
</code></pre></div></div> <p>This doesn’t automatically add it to the simulation, but it is the first step.</p> <h3 id="16-environment-and-actors"> <a href="#16-environment-and-actors" class="anchor-heading" aria-labelledby="16-environment-and-actors"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1.6 Environment and Actors </h3> <p>Environment consists of collection of actors and sensors simulated together. The overall reason to pack them together is performance.</p> <p>Lets setup a simple environment:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">spacing</span> <span class="o">=</span> <span class="mf">2.0</span>
<span class="n">lower</span> <span class="o">=</span> <span class="n">gymapi</span><span class="p">.</span><span class="n">Vec3</span><span class="p">(</span><span class="o">-</span><span class="n">spacing</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="o">-</span><span class="n">spacing</span><span class="p">)</span>
<span class="n">upper</span> <span class="o">=</span> <span class="n">gymapi</span><span class="p">.</span><span class="n">Vec3</span><span class="p">(</span><span class="n">spacing</span><span class="p">,</span> <span class="n">spacing</span><span class="p">,</span> <span class="n">spacing</span><span class="p">)</span>
<span class="n">env</span> <span class="o">=</span> <span class="n">gym</span><span class="p">.</span><span class="n">create_env</span><span class="p">(</span><span class="n">sim</span><span class="p">,</span> <span class="n">lower</span><span class="p">,</span> <span class="n">upper</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span>
</code></pre></div></div> <p>this creates 8 environments.</p> <p>If we want to create an actor, we can do so below:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">pose</span> <span class="o">=</span> <span class="n">gymapi</span><span class="p">.</span><span class="n">Transform</span><span class="p">()</span>
<span class="n">pose</span><span class="p">.</span><span class="n">p</span> <span class="o">=</span> <span class="n">gymapi</span><span class="p">.</span><span class="n">Vec3</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
<span class="n">pose</span><span class="p">.</span><span class="n">r</span> <span class="o">=</span> <span class="n">gymapi</span><span class="p">.</span><span class="n">Quat</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
<span class="n">actor_handle</span> <span class="o">=</span> <span class="n">gym</span><span class="p">.</span><span class="n">create_actor</span><span class="p">(</span>
    <span class="n">env</span><span class="p">,</span>
    <span class="n">asset</span><span class="p">,</span>
    <span class="n">pose</span><span class="p">,</span>
    <span class="s">"MyActor"</span><span class="p">,</span>
    <span class="mi">0</span><span class="p">,</span>
    <span class="mi">1</span>
<span class="p">)</span>
</code></pre></div></div> <p>Here’s a quick example of going from axis-angle to quaternion:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">pose</span><span class="p">.</span><span class="n">r</span> <span class="o">=</span> <span class="n">gymapi</span><span class="p">.</span><span class="n">Quat</span><span class="p">.</span><span class="n">from_axis_angle</span><span class="p">(</span><span class="n">gymapi</span><span class="p">.</span><span class="n">Vec3</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="o">-</span><span class="mf">0.5</span> <span class="o">*</span> <span class="n">math</span><span class="p">.</span><span class="n">pi</span><span class="p">)</span>
</code></pre></div></div> <p>Any argument after <code class="language-plaintext highlighter-rouge">MyActor</code> are optional. The two args are <b> collision_group </b> and <b> collision_filter </b>. The <code class="language-plaintext highlighter-rouge">collision_group</code> assigns the actor to a collision group. This prevents actors from the same environment from colliding with each other. The <code class="language-plaintext highlighter-rouge">collision_filter</code> is a bit mask that helps filter collision between bodies (kinda like preventing self-collision checks if we just have a robot).</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">num_envs</span> <span class="o">=</span> <span class="mi">64</span>
<span class="n">envs_per_row</span> <span class="o">=</span> <span class="mi">8</span> <span class="c1">#infer columns from num_envs
</span><span class="n">env_spacing</span> <span class="o">=</span> <span class="mf">2.0</span>
<span class="n">env_lower</span> <span class="o">=</span> <span class="n">gymapi</span><span class="p">.</span><span class="n">Vec3</span><span class="p">(</span><span class="o">-</span><span class="n">env_spacing</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="o">-</span><span class="n">env_spacing</span><span class="p">)</span>
<span class="n">env_upper</span> <span class="o">=</span> <span class="n">gymapi</span><span class="p">.</span><span class="n">Vec3</span><span class="p">(</span><span class="n">env_spacing</span><span class="p">,</span> <span class="n">env_spacing</span><span class="p">,</span> <span class="n">env_spacing</span><span class="p">)</span>

<span class="n">envs</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">actor_handles</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_envs</span><span class="p">):</span>
    <span class="n">env</span> <span class="o">=</span> <span class="n">gym</span><span class="p">.</span><span class="n">create_env</span><span class="p">(</span><span class="n">sim</span><span class="p">,</span> <span class="n">env_lower</span><span class="p">,</span> <span class="n">env_upper</span><span class="p">,</span> <span class="n">envs_per_row</span><span class="p">)</span>
    <span class="n">envs</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">env</span><span class="p">)</span>
    
    <span class="n">height</span> <span class="o">=</span> <span class="n">random</span><span class="p">.</span><span class="n">uniform</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">2.5</span><span class="p">)</span>
    <span class="n">pose</span> <span class="o">=</span> <span class="n">gymapi</span><span class="p">.</span><span class="n">Transform</span><span class="p">()</span>
    <span class="n">pose</span><span class="p">.</span><span class="n">p</span> <span class="o">=</span> <span class="n">gymapi</span><span class="p">.</span><span class="n">Vec3</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>

    <span class="n">actor_handle</span> <span class="o">=</span> <span class="n">gym</span><span class="p">.</span><span class="n">create_actor</span><span class="p">(</span>
        <span class="n">env</span><span class="p">,</span>
        <span class="n">asset</span><span class="p">,</span>
        <span class="n">pose</span><span class="p">,</span>
        <span class="s">"MyActor"</span><span class="p">,</span>
        <span class="n">i</span><span class="p">,</span>
        <span class="mi">1</span>
    <span class="p">)</span>
    <span class="n">actor_handles</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">actor_handle</span><span class="p">)</span>
</code></pre></div></div> <p>Be aware that once you finish populating one environment and start creating another, the first environment can no longer have stuff added to it. This is because of how memory is allocated. We can find ways to “fake” having dynamic number of actors, but that is for later.</p> <h3 id="17-running-sim"> <a href="#17-running-sim" class="anchor-heading" aria-labelledby="17-running-sim"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1.7 Running Sim </h3> <p>Super Simple:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
    <span class="c1"># step the physics
</span>    <span class="n">gym</span><span class="p">.</span><span class="n">simulate</span><span class="p">(</span><span class="n">sim</span><span class="p">)</span> <span class="c1"># each iteration is one timestep
</span>    <span class="n">gym</span><span class="p">.</span><span class="n">fetch_results</span><span class="p">(</span><span class="n">sim</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>
</code></pre></div></div> <h3 id="18-adding-a-viewer"> <a href="#18-adding-a-viewer" class="anchor-heading" aria-labelledby="18-adding-a-viewer"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1.8 Adding a Viewer </h3> <p>If we want to visualize our setup, we need to add a viewer.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">cam_props</span> <span class="o">=</span> <span class="n">gymapi</span><span class="p">.</span><span class="n">CameraProperties</span><span class="p">()</span>
<span class="n">viewer</span> <span class="o">=</span> <span class="n">gym</span><span class="p">.</span><span class="n">create_viewer</span><span class="p">(</span><span class="n">sim</span><span class="p">,</span> <span class="n">cam_props</span><span class="p">)</span>
</code></pre></div></div> <p>If we want to update the viewer (re-draw on it), we need to execute the following every iteration:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">gym</span><span class="p">.</span><span class="n">step_graphics</span><span class="p">(</span><span class="n">sim</span><span class="p">)</span>
<span class="n">gym</span><span class="p">.</span><span class="n">draw_viewer</span><span class="p">(</span><span class="n">viewer</span><span class="p">,</span> <span class="n">sim</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>
</code></pre></div></div> <p>The <code class="language-plaintext highlighter-rouge">step_graphics</code> function synchronizes visual representation with simulation context. The <code class="language-plaintext highlighter-rouge">draw_viewer</code> renders the visual representation of the simulation. They are separate because <code class="language-plaintext highlighter-rouge">step_graphics</code> can be called without <code class="language-plaintext highlighter-rouge">draw_viewer</code> or even the need for a viewer.</p> <p>To synchronize visual update frequency with real time we add this to the loop:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">gym</span><span class="p">.</span><span class="n">sync_frame_time</span><span class="p">(</span><span class="n">sim</span><span class="p">)</span>
</code></pre></div></div> <p>This throttles down the simulation rate to match real-time. If it’s slower than real time, this has no effect.</p> <p>We can terminate simulation by checking if viewer was closed with <code class="language-plaintext highlighter-rouge">query_viewer_has_closed</code>.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">while</span> <span class="ow">not</span> <span class="n">gym</span><span class="p">.</span><span class="n">query_viewer_has_closed</span><span class="p">(</span><span class="n">viewer</span><span class="p">):</span>
    <span class="n">gym</span><span class="p">.</span><span class="n">simulate</span><span class="p">(</span><span class="n">sim</span><span class="p">)</span>
    <span class="n">gym</span><span class="p">.</span><span class="n">fetch_results</span><span class="p">(</span><span class="n">sim</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>

    <span class="n">gym</span><span class="p">.</span><span class="n">step_graphics</span><span class="p">(</span><span class="n">sim</span><span class="p">)</span>
    <span class="n">gym</span><span class="p">.</span><span class="n">draw_viewer</span><span class="p">(</span><span class="n">viewer</span><span class="p">,</span> <span class="n">sim</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>
    <span class="n">gym</span><span class="p">.</span><span class="n">sync_frame_time</span><span class="p">(</span><span class="n">sim</span><span class="p">)</span>
</code></pre></div></div><hr /> <h2 id="2-assets"> <a href="#2-assets" class="anchor-heading" aria-labelledby="2-assets"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 2. Assets </h2> <p>Lets start off with loading an asset.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">asset_root</span> <span class="o">=</span> <span class="s">"../../assets"</span>
<span class="n">asset_file</span> <span class="o">=</span> <span class="s">"urdf/franka_description/robots/franka_panda.urdf"</span>
<span class="n">asset</span> <span class="o">=</span> <span class="n">gym</span><span class="p">.</span><span class="n">load_asset</span><span class="p">(</span><span class="n">sim</span><span class="p">,</span> <span class="n">asset_root</span><span class="p">,</span> <span class="n">asset_file</span><span class="p">)</span>
</code></pre></div></div> <p>We can specify options for asset.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">asset_options</span> <span class="o">=</span> <span class="n">gymapi</span><span class="p">.</span><span class="n">AssetOptions</span><span class="p">()</span>
<span class="n">asset_options</span><span class="p">.</span><span class="n">fix_base_link</span> <span class="o">=</span> <span class="bp">True</span>
<span class="n">asset_options</span><span class="p">.</span><span class="n">armature</span> <span class="o">=</span> <span class="mf">0.01</span>

<span class="n">asset_options</span><span class="p">.</span><span class="n">use_mesh_materials</span> <span class="o">=</span> <span class="bp">True</span>
<span class="n">asset_options</span><span class="p">.</span><span class="n">mesh_normal_mode</span> <span class="o">=</span> <span class="n">gymapi</span><span class="p">.</span><span class="n">COMPUTE_PER_VERTEX</span>
<span class="c1"># asset_options.mesh_normal_mode = gymapi.COMPUTE_PER_FACE
# asset_options.convex_decomposition_from_submeshes = True
</span><span class="n">asset</span> <span class="o">=</span> <span class="n">gym</span><span class="p">.</span><span class="n">load_asset</span><span class="p">(</span><span class="n">sim</span><span class="p">,</span> <span class="n">asset_root</span><span class="p">,</span> <span class="n">asset_file</span><span class="p">,</span> <span class="n">asset_options</span><span class="p">)</span>
</code></pre></div></div> <h3 id="21-overriding-inertial-properties"> <a href="#21-overriding-inertial-properties" class="anchor-heading" aria-labelledby="21-overriding-inertial-properties"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 2.1 Overriding Inertial Properties </h3> <p>The URDF and MJCF file formats also specify inertial properties. We can override these properties.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">asset_options</span><span class="p">.</span><span class="n">override_com</span> <span class="o">=</span> <span class="bp">True</span>
<span class="n">asset_options</span><span class="p">.</span><span class="n">override_inertia</span> <span class="o">=</span> <span class="bp">True</span>
</code></pre></div></div> <p>This will use values computed from geometries of collision shapes.</p> <h3 id="22-convex-decomposition"> <a href="#22-convex-decomposition" class="anchor-heading" aria-labelledby="22-convex-decomposition"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 2.2 Convex Decomposition </h3> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">asset_options</span><span class="p">.</span><span class="n">vhacd_enabled</span> <span class="o">=</span> <span class="bp">True</span>
</code></pre></div></div> <p>This enables convex decomposition which makes much more complex collision shape (matches actual mesh).</p> <h3 id="23-procedural-assets-primitives"> <a href="#23-procedural-assets-primitives" class="anchor-heading" aria-labelledby="23-procedural-assets-primitives"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 2.3 Procedural Assets (Primitives) </h3> <p>We can create simple geometric assets. Just need to do the following:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">asset_options</span> <span class="o">=</span> <span class="n">gym</span><span class="p">.</span><span class="n">AssetOptions</span><span class="p">()</span>
<span class="n">asset_options</span><span class="p">.</span><span class="n">density</span> <span class="o">=</span> <span class="mf">10.0</span>

<span class="n">box_asset</span>     <span class="o">=</span> <span class="n">gym</span><span class="p">.</span><span class="n">create_box</span><span class="p">(</span><span class="n">sim</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="n">depth</span><span class="p">,</span> <span class="n">asset_options</span><span class="p">)</span>
<span class="n">sphere_asset</span>  <span class="o">=</span> <span class="n">gym</span><span class="p">.</span><span class="n">create_sphere</span><span class="p">(</span><span class="n">sim</span><span class="p">,</span> <span class="n">radius</span><span class="p">,</span> <span class="n">asset_options</span><span class="p">)</span>
<span class="n">capsule_asset</span> <span class="o">=</span> <span class="n">gym</span><span class="p">.</span><span class="n">create_capsule</span><span class="p">(</span><span class="n">sim</span><span class="p">,</span> <span class="n">radius</span><span class="p">,</span> <span class="n">length</span><span class="p">,</span> <span class="n">asset_options</span><span class="p">)</span>
</code></pre></div></div><hr /> <h2 id="3-physics-simulation"> <a href="#3-physics-simulation" class="anchor-heading" aria-labelledby="3-physics-simulation"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 3. Physics Simulation </h2> <h3 id="31-creating-actors"> <a href="#31-creating-actors" class="anchor-heading" aria-labelledby="31-creating-actors"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 3.1 Creating Actors </h3> <p>An actor is an instance of <code class="language-plaintext highlighter-rouge">GymAsset</code>. <code class="language-plaintext highlighter-rouge">create_actor</code> creates actor and adds it to environment and returns handle to it. Much better to save these handles rather than look them up every time we need to access them.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">envs</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">actor_handles</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">print</span><span class="p">(</span><span class="s">"Creating %d environments"</span> <span class="o">%</span> <span class="n">num_envs</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_envs</span><span class="p">):</span>
    <span class="n">env</span> <span class="o">=</span> <span class="n">gym</span><span class="p">.</span><span class="n">create_env</span><span class="p">(</span><span class="n">sim</span><span class="p">,</span> <span class="n">env_lower</span><span class="p">,</span> <span class="n">env_upper</span><span class="p">,</span> <span class="n">num_per_row</span><span class="p">)</span>
    <span class="n">envs</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">evs</span><span class="p">)</span>

    <span class="c1"># add actor
</span>    <span class="n">actor_handle</span> <span class="o">=</span> <span class="n">gym</span><span class="p">.</span><span class="n">create_actor</span><span class="p">(</span><span class="n">env</span><span class="p">,</span> <span class="n">asset</span><span class="p">,</span> <span class="n">pose</span><span class="p">,</span> <span class="s">"actor"</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
    <span class="n">actor_handles</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">actor_handle</span><span class="p">)</span>
</code></pre></div></div> <p>actor_handles are specific to an environment. Functions that operate on actor are <code class="language-plaintext highlighter-rouge">get_actor_*</code>, <code class="language-plaintext highlighter-rouge">set_actor_*</code>, and <code class="language-plaintext highlighter-rouge">apply_actor_*</code>.</p> <h3 id="32-aggregates-only-on-physx"> <a href="#32-aggregates-only-on-physx" class="anchor-heading" aria-labelledby="32-aggregates-only-on-physx"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 3.2 Aggregates (only on PhysX) </h3> <p>Aggregate is collection of actors. They do not provide extra simulation functionality, but they tell you that a set of actors will be clustered together, which allow PhysX to optimize its spatial data operations. Creating them gives modest performance boost.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">gym</span><span class="p">.</span><span class="n">begin_aggregate</span><span class="p">(</span><span class="n">env</span><span class="p">,</span> <span class="n">max_bodies</span><span class="p">,</span> <span class="n">max_shapes</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>
<span class="n">gym</span><span class="p">.</span><span class="n">create_actor</span><span class="p">(</span><span class="n">env</span><span class="p">,</span> <span class="p">...)</span>
<span class="n">gym</span><span class="p">.</span><span class="n">create_actor</span><span class="p">(</span><span class="n">env</span><span class="p">,</span> <span class="p">...)</span>
<span class="n">gym</span><span class="p">.</span><span class="n">end_aggregate</span><span class="p">(</span><span class="n">env</span><span class="p">)</span>
</code></pre></div></div> <h3 id="33-actor-components"> <a href="#33-actor-components" class="anchor-heading" aria-labelledby="33-actor-components"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 3.3 Actor Components </h3> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">num_bodies</span> <span class="o">=</span> <span class="n">gym</span><span class="p">.</span><span class="n">get_actor_rigid_body_count</span><span class="p">(</span><span class="n">env</span><span class="p">,</span> <span class="n">actor_handle</span><span class="p">)</span>
<span class="n">num_joints</span> <span class="o">=</span> <span class="n">gym</span><span class="p">.</span><span class="n">get_actor_joint_count</span><span class="p">(</span><span class="n">env</span><span class="p">,</span> <span class="n">actor_handle</span><span class="p">)</span>
<span class="n">num_dofs</span>   <span class="o">=</span> <span class="n">gym</span><span class="p">.</span><span class="n">get_actor_dof_count</span><span class="p">(</span><span class="n">env</span><span class="p">,</span> <span class="n">actor_handle</span><span class="p">)</span>
</code></pre></div></div> <p><b> Joints </b> - these can be fixed, revolute, prismatic.</p> <p><b> Degrees of Freedom (DOF) </b> - these are the actuated joints. They are the joints that can be controlled.</p> <h3 id="34-controlling-actors"> <a href="#34-controlling-actors" class="anchor-heading" aria-labelledby="34-controlling-actors"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 3.4 Controlling Actors </h3> <p>Controlling actors is done through using the DOFs. For each DOF, we can set drive mode, limits, stiffness, damping, and targets.</p> <p><b> Scaling Actors </b> - we can scale their size at runtime. It changes its mas, joint positions, prismatic joint limits, and collision geometry. The CoM isn’t updated though. Resetting transforms or velocities or applying forces at the same time as scaling may yield incorrect results.</p> <p><b> DOF Properties and drive Modes </b> - can be accessed with <code class="language-plaintext highlighter-rouge">get_asset_dof_properties</code> and individual actors (<code class="language-plaintext highlighter-rouge">get_actor_dof_properties</code>/<code class="language-plaintext highlighter-rouge">set_actor_dof_properties</code>).</p> <div class="table-wrapper"><table> <thead> <tr> <th>Name</th> <th>Data Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>hasLimits</td> <td>bool</td> <td>Whether DOF has limits</td> </tr> <tr> <td>lower</td> <td>float32</td> <td>Lower limit</td> </tr> <tr> <td>upper</td> <td>float32</td> <td>Upper limit</td> </tr> <tr> <td>driveMode</td> <td>gymapi.DofDriveMode</td> <td>DOF drive mode</td> </tr> <tr> <td>stiffness</td> <td>float32</td> <td>Drive Stiffness</td> </tr> <tr> <td>damping</td> <td>float32</td> <td>Drive Damping</td> </tr> <tr> <td>velocity</td> <td>float32</td> <td>Max Velocity</td> </tr> <tr> <td>effort</td> <td>float32</td> <td>Max effort (force/torque)</td> </tr> <tr> <td>friction</td> <td>float32</td> <td>DOF friction</td> </tr> <tr> <td>armature</td> <td>float32</td> <td>DOF armature</td> </tr> </tbody> </table></div> <p><code class="language-plaintext highlighter-rouge">DOF_MODE_NONE</code> lets joints move freely.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">props</span> <span class="o">=</span> <span class="n">gym</span><span class="p">.</span><span class="n">get_actor_dof_properties</span><span class="p">(</span><span class="n">env</span><span class="p">,</span> <span class="n">actor_handle</span><span class="p">)</span>
<span class="n">props</span><span class="p">[</span><span class="s">'driveMode'</span><span class="p">].</span><span class="n">fill</span><span class="p">(</span><span class="n">gymapi</span><span class="p">.</span><span class="n">DOF_MODE_NONE</span><span class="p">)</span>
<span class="n">props</span><span class="p">[</span><span class="s">'stiffness'</span><span class="p">].</span><span class="n">fill</span><span class="p">(</span><span class="mf">0.0</span><span class="p">)</span>
<span class="n">props</span><span class="p">[</span><span class="s">'damping'</span><span class="p">].</span><span class="n">fill</span><span class="p">(</span><span class="mf">0.0</span><span class="p">)</span>
<span class="n">gym</span><span class="p">.</span><span class="n">set_actor_dof_properties</span><span class="p">(</span><span class="n">env</span><span class="p">,</span> <span class="n">actor_handle</span><span class="p">,</span> <span class="n">props</span><span class="p">)</span>
</code></pre></div></div> <p><code class="language-plaintext highlighter-rouge">DOF_MODE_EFFORT</code> lets us apply efforts to the DOF using <code class="language-plaintext highlighter-rouge">apply_actor_dof_efforts</code>.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># configure the joints for effort control mode (once)
</span><span class="n">props</span> <span class="o">=</span> <span class="n">gym</span><span class="p">.</span><span class="n">get_actor_dof_properties</span><span class="p">(</span><span class="n">env</span><span class="p">,</span> <span class="n">actor_handle</span><span class="p">)</span>
<span class="n">props</span><span class="p">[</span><span class="s">"driveMode"</span><span class="p">].</span><span class="n">fill</span><span class="p">(</span><span class="n">gymapi</span><span class="p">.</span><span class="n">DOF_MODE_EFFORT</span><span class="p">)</span>
<span class="n">props</span><span class="p">[</span><span class="s">"stiffness"</span><span class="p">].</span><span class="n">fill</span><span class="p">(</span><span class="mf">0.0</span><span class="p">)</span>
<span class="n">props</span><span class="p">[</span><span class="s">"damping"</span><span class="p">].</span><span class="n">fill</span><span class="p">(</span><span class="mf">0.0</span><span class="p">)</span>
<span class="n">gym</span><span class="p">.</span><span class="n">set_actor_dof_properties</span><span class="p">(</span><span class="n">env</span><span class="p">,</span> <span class="n">actor_handle</span><span class="p">,</span> <span class="n">props</span><span class="p">)</span>

<span class="c1"># apply efforts (every frame)
</span><span class="n">efforts</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">full</span><span class="p">(</span><span class="n">num_dofs</span><span class="p">,</span> <span class="mf">100.0</span><span class="p">).</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="p">.</span><span class="n">float32</span><span class="p">)</span>
<span class="n">gym</span><span class="p">.</span><span class="n">apply_actor_dof_efforts</span><span class="p">(</span><span class="n">env</span><span class="p">,</span> <span class="n">actor_handle</span><span class="p">,</span> <span class="n">efforts</span><span class="p">)</span>
</code></pre></div></div> <p><code class="language-plaintext highlighter-rouge">DOF_MODE_POS</code> lets u set target positions for a PD controller.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">props</span> <span class="o">=</span> <span class="n">gym</span><span class="p">.</span><span class="n">get_actor_dof_properties</span><span class="p">(</span><span class="n">env</span><span class="p">,</span> <span class="n">actor_handle</span><span class="p">)</span>
<span class="n">props</span><span class="p">[</span><span class="s">"driveMode"</span><span class="p">].</span><span class="n">fill</span><span class="p">(</span><span class="n">gymapi</span><span class="p">.</span><span class="n">DOF_MODE_POS</span><span class="p">)</span>
<span class="n">props</span><span class="p">[</span><span class="s">"stiffness"</span><span class="p">].</span><span class="n">fill</span><span class="p">(</span><span class="mf">1000.0</span><span class="p">)</span>
<span class="n">props</span><span class="p">[</span><span class="s">"damping"</span><span class="p">].</span><span class="n">fill</span><span class="p">(</span><span class="mf">200.0</span><span class="p">)</span>
<span class="n">gym</span><span class="p">.</span><span class="n">set_actor_dof_properties</span><span class="p">(</span><span class="n">env</span><span class="p">,</span> <span class="n">actor_handle</span><span class="p">,</span> <span class="n">props</span><span class="p">)</span>

<span class="n">targets</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">num_dofs</span><span class="p">).</span><span class="n">astype</span><span class="p">(</span><span class="s">'f'</span><span class="p">)</span>
<span class="n">gym</span><span class="p">.</span><span class="n">set_actor_dof_position_targets</span><span class="p">(</span><span class="n">env</span><span class="p">,</span> <span class="n">actor_handle</span><span class="p">,</span> <span class="n">targets</span><span class="p">)</span>
</code></pre></div></div> <p>if DOF is linear, target is in meters. If DOF is angular, target is in radians.</p> <p>if we want to set random positions for the DOF, here it is:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">dof_props</span> <span class="o">=</span> <span class="n">gym</span><span class="p">.</span><span class="n">get_actor_dof_properties</span><span class="p">(</span><span class="n">envs</span><span class="p">,</span> <span class="n">actor_handles</span><span class="p">)</span>
<span class="n">lower_limits</span> <span class="o">=</span> <span class="n">dof_props</span><span class="p">[</span><span class="s">'lower'</span><span class="p">]</span>
<span class="n">upper_limits</span> <span class="o">=</span> <span class="n">dof_props</span><span class="p">[</span><span class="s">'upper'</span><span class="p">]</span>
<span class="n">ranges</span> <span class="o">=</span> <span class="n">upper_limits</span> <span class="o">-</span> <span class="n">lower_limits</span>

<span class="n">pos_targets</span> <span class="o">=</span> <span class="n">lower_limits</span> <span class="o">+</span> <span class="n">ranges</span> <span class="o">*</span> <span class="n">np</span><span class="p">.</span><span class="n">random</span><span class="p">.</span><span class="n">random</span><span class="p">(</span><span class="n">num_dofs</span><span class="p">).</span><span class="n">astype</span><span class="p">(</span><span class="s">'f'</span><span class="p">)</span>
<span class="n">gym</span><span class="p">.</span><span class="n">set_actor_dof_position_targets</span><span class="p">(</span><span class="n">env</span><span class="p">,</span> <span class="n">actor_handle</span><span class="p">,</span> <span class="n">pos_targets</span><span class="p">)</span>
</code></pre></div></div> <p><code class="language-plaintext highlighter-rouge">DOF_MODE_VEL</code> is for velocity control.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">props</span> <span class="o">=</span> <span class="n">gym</span><span class="p">.</span><span class="n">get_actor_dof_properties</span><span class="p">(</span><span class="n">env</span><span class="p">,</span> <span class="n">actor_handle</span><span class="p">)</span>
<span class="n">props</span><span class="p">[</span><span class="s">"driveMode"</span><span class="p">].</span><span class="n">fill</span><span class="p">(</span><span class="n">gymapi</span><span class="p">.</span><span class="n">DOF_MODE_VEL</span><span class="p">)</span>
<span class="n">props</span><span class="p">[</span><span class="s">"stiffness"</span><span class="p">].</span><span class="n">fill</span><span class="p">(</span><span class="mf">0.0</span><span class="p">)</span>
<span class="n">props</span><span class="p">[</span><span class="s">"damping"</span><span class="p">].</span><span class="n">fill</span><span class="p">(</span><span class="mf">600.0</span><span class="p">)</span>
<span class="n">gym</span><span class="p">.</span><span class="n">set_actor_dof_properties</span><span class="p">(</span><span class="n">env</span><span class="p">,</span> <span class="n">actor_handle</span><span class="p">,</span> <span class="n">props</span><span class="p">)</span>

<span class="n">vel_targets</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">random</span><span class="p">.</span><span class="n">uniform</span><span class="p">(</span><span class="o">-</span><span class="n">math</span><span class="p">.</span><span class="n">pi</span><span class="p">,</span> <span class="n">math</span><span class="p">.</span><span class="n">pi</span><span class="p">,</span> <span class="n">num_dofs</span><span class="p">).</span><span class="n">astype</span><span class="p">(</span><span class="s">'f'</span><span class="p">)</span>
<span class="n">gym</span><span class="p">.</span><span class="n">set_actor_dof_velocity_targets</span><span class="p">(</span><span class="n">env</span><span class="p">,</span> <span class="n">actor_handle</span><span class="p">,</span> <span class="n">vel_targets</span><span class="p">)</span>
</code></pre></div></div> <p>Unlike efforts, the ones with controllers only require targets to be set every tame targets need change. Efforts need to be set every frame.</p> <p><b> NOTE: </b> Tensor Control API allows alternative ways to applying controls without setting in CPU. We can run simulations entirely on GPU.</p> <h3 id="35-physics-state"> <a href="#35-physics-state" class="anchor-heading" aria-labelledby="35-physics-state"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 3.5 Physics State </h3> <h4 id="351-rigid-body-states"> <a href="#351-rigid-body-states" class="anchor-heading" aria-labelledby="351-rigid-body-states"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 3.5.1 Rigid Body States </h4> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">actor_body_states</span> <span class="o">=</span> <span class="n">gym</span><span class="p">.</span><span class="n">get_actor_rigid_body_states</span><span class="p">(</span><span class="n">env</span><span class="p">,</span> <span class="n">actor_handle</span><span class="p">,</span> <span class="n">gymapi</span><span class="p">.</span><span class="n">STATE_ALL</span><span class="p">)</span>
<span class="n">env_body_states</span> <span class="o">=</span> <span class="n">gym</span><span class="p">.</span><span class="n">get_env_rigid_body_states</span><span class="p">(</span><span class="n">env</span><span class="p">,</span> <span class="n">gymapi</span><span class="p">.</span><span class="n">STATE_ALL</span><span class="p">)</span>
<span class="n">sim_body_states</span> <span class="o">=</span> <span class="n">gym</span><span class="p">.</span><span class="n">get_sim_rigid_body_states</span><span class="p">(</span><span class="n">sim</span><span class="p">,</span> <span class="n">gymapi</span><span class="p">.</span><span class="n">STATE_ALL</span><span class="p">)</span>
</code></pre></div></div> <p>You can get states for an actor, an environment, or entire simulation.</p> <p>This returns structured numpy arrays. Last argument is a flag for what it should return. <code class="language-plaintext highlighter-rouge">STATE_POS</code> only returns positions. <code class="language-plaintext highlighter-rouge">STATE_VEL</code> only returns velocities. <code class="language-plaintext highlighter-rouge">STATE_ALL</code> returns both positions and velocities.</p> <p>We can access the states like so:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">body_states</span><span class="p">[</span><span class="s">"pose"</span><span class="p">]</span>             <span class="c1"># all poses (position and orientation)
</span><span class="n">body_states</span><span class="p">[</span><span class="s">"pose"</span><span class="p">][</span><span class="s">"p"</span><span class="p">])</span>           <span class="c1"># all positions (Vec3: x, y, z)
</span><span class="n">body_states</span><span class="p">[</span><span class="s">"pose"</span><span class="p">][</span><span class="s">"r"</span><span class="p">])</span>           <span class="c1"># all orientations (Quat: x, y, z, w)
</span><span class="n">body_states</span><span class="p">[</span><span class="s">"vel"</span><span class="p">]</span>              <span class="c1"># all velocities (linear and angular)
</span><span class="n">body_states</span><span class="p">[</span><span class="s">"vel"</span><span class="p">][</span><span class="s">"linear"</span><span class="p">]</span>    <span class="c1"># all linear velocities (Vec3: x, y, z)
</span><span class="n">body_states</span><span class="p">[</span><span class="s">"vel"</span><span class="p">][</span><span class="s">"angular"</span><span class="p">]</span>   <span class="c1"># all angular velocities (Vec3: x, y, z)
</span></code></pre></div></div> <p>We can set the states like so:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">gym</span><span class="p">.</span><span class="n">set_actor_rigid_body_states</span><span class="p">(</span><span class="n">env</span><span class="p">,</span> <span class="n">actor_handle</span><span class="p">,</span> <span class="n">body_states</span><span class="p">,</span> <span class="n">gymapi</span><span class="p">.</span><span class="n">STATE_ALL</span><span class="p">)</span>
<span class="n">gym</span><span class="p">.</span><span class="n">set_env_rigid_body_states</span><span class="p">(</span><span class="n">env</span><span class="p">,</span> <span class="n">body_states</span><span class="p">,</span> <span class="n">gymapi</span><span class="p">.</span><span class="n">STATE_ALL</span><span class="p">)</span>
<span class="n">gym</span><span class="p">.</span><span class="n">set_sim_rigid_body_states</span><span class="p">(</span><span class="n">sim</span><span class="p">,</span> <span class="n">body_states</span><span class="p">,</span> <span class="n">gymapi</span><span class="p">.</span><span class="n">STATE_ALL</span><span class="p">)</span>
</code></pre></div></div> <p>We can only find the index of a specific rigid body using the following:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">i1</span> <span class="o">=</span> <span class="n">gym</span><span class="p">.</span><span class="n">find_actor_rigid_body_index</span><span class="p">(</span><span class="n">env</span><span class="p">,</span> <span class="n">actor_handle</span><span class="p">,</span> <span class="s">"body_name"</span><span class="p">,</span> <span class="n">gymapi</span><span class="p">.</span><span class="n">DOMAIN_ACTOR</span><span class="p">)</span>
<span class="n">i2</span> <span class="o">=</span> <span class="n">gym</span><span class="p">.</span><span class="n">find_actor_rigid_body_index</span><span class="p">(</span><span class="n">env</span><span class="p">,</span> <span class="n">actor_handle</span><span class="p">,</span> <span class="s">"body_name"</span><span class="p">,</span> <span class="n">gymapi</span><span class="p">.</span><span class="n">DOMAIN_ENV</span><span class="p">)</span>
<span class="n">i3</span> <span class="o">=</span> <span class="n">gym</span><span class="p">.</span><span class="n">find_actor_rigid_body_index</span><span class="p">(</span><span class="n">env</span><span class="p">,</span> <span class="n">actor_handle</span><span class="p">,</span> <span class="s">"body_name"</span><span class="p">,</span> <span class="n">gymapi</span><span class="p">.</span><span class="n">DOMAIN_SIM</span><span class="p">)</span>
</code></pre></div></div> <h3 id="352-dof-states"> <a href="#352-dof-states" class="anchor-heading" aria-labelledby="352-dof-states"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 3.5.2 DOF States </h3> <p>We can also work with reduced coordinates.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">dof_states</span> <span class="o">=</span> <span class="n">gym</span><span class="p">.</span><span class="n">get_actor_dof_states</span><span class="p">(</span><span class="n">env</span><span class="p">,</span> <span class="n">actor_handle</span><span class="p">,</span> <span class="n">gymapi</span><span class="p">.</span><span class="n">STATE_ALL</span><span class="p">)</span>

<span class="n">gym</span><span class="p">.</span><span class="n">set_actor_dof_states</span><span class="p">(</span><span class="n">env</span><span class="p">,</span> <span class="n">actor_handle</span><span class="p">,</span> <span class="n">dof_states</span><span class="p">,</span> <span class="n">gymapi</span><span class="p">.</span><span class="n">STATE_ALL</span><span class="p">)</span>
</code></pre></div></div> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">dof_states</span><span class="p">[</span><span class="s">"pos"</span><span class="p">]</span>   <span class="c1"># all positions
</span><span class="n">dof_states</span><span class="p">[</span><span class="s">"vel"</span><span class="p">]</span>   <span class="c1"># all velocities
</span></code></pre></div></div><hr /> <h2 id="4-tensor-api"> <a href="#4-tensor-api" class="anchor-heading" aria-labelledby="4-tensor-api"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 4. Tensor API </h2> <p>This API use GPU-compatible data representations for interacting with simulations.</p> <p>Tensors from this API are “global” tensors (they hold values for all actors in simulation). This sort of structure makes it very easy to enable data parallelism.</p> <h3 id="41-simulation-setup"> <a href="#41-simulation-setup" class="anchor-heading" aria-labelledby="41-simulation-setup"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 4.1 Simulation Setup </h3> <p>This is currently only available for PhysX simulation.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">sim_params</span> <span class="o">=</span> <span class="n">gymapi</span><span class="p">.</span><span class="n">SimParams</span><span class="p">()</span>
<span class="p">...</span>
<span class="n">sim_params</span><span class="p">.</span><span class="n">use_gpu_pipeline</span> <span class="o">=</span> <span class="bp">True</span>
<span class="n">sim_params</span><span class="p">.</span><span class="n">physx</span><span class="p">.</span><span class="n">use_gpu</span> <span class="o">=</span> <span class="bp">True</span>

<span class="n">sim</span> <span class="o">=</span> <span class="n">gym</span><span class="p">.</span><span class="n">create_sim</span><span class="p">(</span><span class="n">compute_device_id</span><span class="p">,</span> <span class="n">graphics_device_id</span><span class="p">,</span> <span class="n">gymapi</span><span class="p">.</span><span class="n">SIM_PHYSX</span><span class="p">,</span> <span class="n">sim_params</span><span class="p">)</span>
</code></pre></div></div> <p>We must call <code class="language-plaintext highlighter-rouge">prepare_sim</code> to initialize internal data structures used by tensor API.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">gym</span><span class="p">.</span><span class="n">prepare_sim</span><span class="p">(</span><span class="n">sim</span><span class="p">)</span>
</code></pre></div></div> <h3 id="42-physics-state"> <a href="#42-physics-state" class="anchor-heading" aria-labelledby="42-physics-state"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 4.2 Physics State </h3> <p>After <code class="language-plaintext highlighter-rouge">prepare_sim</code>, we can acquire physics state tensors.</p> <h3 id="421-actor-root-state-tensor"> <a href="#421-actor-root-state-tensor" class="anchor-heading" aria-labelledby="421-actor-root-state-tensor"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 4.2.1 Actor Root State Tensor </h3> <p>A Gym actor has 1+ rigid bodies. All actors have a root body. The root state tensor holds state of all actor root bodies in simulation. The state of root body is 13-dimensional [position, quaternion, linear velocity, angular velocity].</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">_root_tensor</span> <span class="o">=</span> <span class="n">gym</span><span class="p">.</span><span class="n">acquire_actor_root_state_tensor</span><span class="p">(</span><span class="n">sim</span><span class="p">)</span>
</code></pre></div></div> <p>This returns generic tensor descriptor. In order to access contents of tensor, we warp it in PyTorch Tensor object using <code class="language-plaintext highlighter-rouge">gymtorch.wrap_tensor</code>.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">root_tensor</span> <span class="o">=</span> <span class="n">gymtorch</span><span class="p">.</span><span class="n">wrap_tensor</span><span class="p">(</span><span class="n">_root_tensor</span><span class="p">)</span>
</code></pre></div></div> <p>now this is a tensor in pytorch. here we can see the structure of the tensor:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">root_positions</span> <span class="o">=</span> <span class="n">root_tensor</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span>
<span class="n">root_orientations</span> <span class="o">=</span> <span class="n">root_tensor</span><span class="p">[:,</span> <span class="mi">3</span><span class="p">:</span><span class="mi">7</span><span class="p">]</span>
<span class="n">root_linvels</span> <span class="o">=</span> <span class="n">root_tensor</span><span class="p">[:,</span> <span class="mi">7</span><span class="p">:</span><span class="mi">10</span><span class="p">]</span>
<span class="n">root_angvels</span> <span class="o">=</span> <span class="n">root_tensor</span><span class="p">[:,</span> <span class="mi">10</span><span class="p">:</span><span class="mi">13</span><span class="p">]</span>
</code></pre></div></div> <p>To update contents of tensors with latest state, call:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">gym</span><span class="p">.</span><span class="n">refresh_actor_root_state_tensor</span><span class="p">(</span><span class="n">sim</span><span class="p">)</span>
</code></pre></div></div> <p>this will update the tensor with latest state. Generally, do this after each call to `gym.simulate’.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># ...create sim, envs, and actors here...
</span>
<span class="n">gym</span><span class="p">.</span><span class="n">prepare_sim</span><span class="p">()</span>

<span class="c1"># acquire root state tensor descriptor
</span><span class="n">_root_tensor</span> <span class="o">=</span> <span class="n">gym</span><span class="p">.</span><span class="n">acquire_actor_root_state_tensor</span><span class="p">(</span><span class="n">sim</span><span class="p">)</span>

<span class="c1"># wrap it in a PyTorch Tensor and create convenient views
</span><span class="n">root_tensor</span> <span class="o">=</span> <span class="n">gymtorch</span><span class="p">.</span><span class="n">wrap_tensor</span><span class="p">(</span><span class="n">_root_tensor</span><span class="p">)</span>
<span class="n">root_positions</span> <span class="o">=</span> <span class="n">root_tensor</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span>
<span class="n">root_orientations</span> <span class="o">=</span> <span class="n">root_tensor</span><span class="p">[:,</span> <span class="mi">3</span><span class="p">:</span><span class="mi">7</span><span class="p">]</span>
<span class="n">root_linvels</span> <span class="o">=</span> <span class="n">root_tensor</span><span class="p">[:,</span> <span class="mi">7</span><span class="p">:</span><span class="mi">10</span><span class="p">]</span>
<span class="n">root_angvels</span> <span class="o">=</span> <span class="n">root_tensor</span><span class="p">[:,</span> <span class="mi">10</span><span class="p">:</span><span class="mi">13</span><span class="p">]</span>

<span class="c1"># main simulation loop
</span><span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
    <span class="c1"># step the physics simulation
</span>    <span class="n">gym</span><span class="p">.</span><span class="n">simulate</span><span class="p">(</span><span class="n">sim</span><span class="p">)</span>

    <span class="c1"># refresh the state tensors
</span>    <span class="n">gym</span><span class="p">.</span><span class="n">refresh_actor_root_state_tensor</span><span class="p">(</span><span class="n">sim</span><span class="p">)</span>

    <span class="c1"># ...use the latest state tensors here...
</span></code></pre></div></div> <p>We can also set the root state tensor.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># acquire root state tensor descriptor
</span><span class="n">_root_tensor</span> <span class="o">=</span> <span class="n">gym</span><span class="p">.</span><span class="n">acquire_actor_root_state_tensor</span><span class="p">(</span><span class="n">sim</span><span class="p">)</span>

<span class="c1"># wrap it in a PyTorch Tensor
</span><span class="n">root_tensor</span> <span class="o">=</span> <span class="n">gymtorch</span><span class="p">.</span><span class="n">wrap_tensor</span><span class="p">(</span><span class="n">_root_tensor</span><span class="p">)</span>

<span class="c1"># save a copy of the original root states
</span><span class="n">saved_root_tensor</span> <span class="o">=</span> <span class="n">root_tensor</span><span class="p">.</span><span class="n">clone</span><span class="p">()</span>

<span class="n">step</span> <span class="o">=</span> <span class="mi">0</span>

<span class="c1"># main simulation loop
</span><span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
    <span class="c1"># step the physics simulation
</span>    <span class="n">gym</span><span class="p">.</span><span class="n">simulate</span><span class="p">(</span><span class="n">sim</span><span class="p">)</span>

    <span class="n">step</span> <span class="o">+=</span> <span class="mi">1</span>

    <span class="k">if</span> <span class="n">step</span> <span class="o">%</span> <span class="mi">100</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">gym</span><span class="p">.</span><span class="n">set_actor_root_state_tensor</span><span class="p">(</span><span class="n">sim</span><span class="p">,</span> <span class="n">gymtorch</span><span class="p">.</span><span class="n">unwrap_tensor</span><span class="p">(</span><span class="n">saved_root_tensor</span><span class="p">))</span>
</code></pre></div></div> <p>We can also set root state tensor for a subset of actors using <code class="language-plaintext highlighter-rouge">set_actor_root_state_tensor_indexed</code>.</p> <h3 id="423-degrees-of-freedom"> <a href="#423-degrees-of-freedom" class="anchor-heading" aria-labelledby="423-degrees-of-freedom"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 4.2.3 Degrees of Freedom </h3> <p>Articulated actors have a number of DoFs whose state can be queried and changed. State of each DoF is represented with 2 float32 values: position and velocity.</p> <p>The DoF state tensor contains state of all DoFs in simulation. Number of DoFs can be obtained by calling <code class="language-plaintext highlighter-rouge">gym.get_sim_dof_count(sim)</code>. The DoF states are laid out sequentially. Number of DoFs for a specific actor can be obtained by calling <code class="language-plaintext highlighter-rouge">gym.get_actor_dof_count(env, actor)</code>. Global index of a specific DoF can be obtained a number of ways:</p> <ul> <li><code class="language-plaintext highlighter-rouge">gym.get_actor_dof_index(env, actor_handle, i, gymapi.DOMAIN_SIM)</code>.</li> <li><code class="language-plaintext highlighter-rouge">gym.find_actor_dof_index(env, actor_handle, dof_name, gymapi.DOMAIN_SIM)</code></li> </ul> <p>We can access dof state as follows:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">_dof_states</span> <span class="o">=</span> <span class="n">gym</span><span class="p">.</span><span class="n">acquire_dof_state_tensor</span><span class="p">(</span><span class="n">sim</span><span class="p">)</span>
<span class="n">dof_states</span> <span class="o">=</span> <span class="n">gymtorch</span><span class="p">.</span><span class="n">wrap_tensor</span><span class="p">(</span><span class="n">_dof_states</span><span class="p">)</span>
</code></pre></div></div> <p>Function <code class="language-plaintext highlighter-rouge">refresh_dof_state_tensor</code> populates tensor with latest data from simulation.</p> <p>just like the root state tensor, we can set the DoF state tensor using <code class="language-plaintext highlighter-rouge">gym.set_dof_state_tensor(sim, _dof_states)</code>.</p> <p>We can also set the DoF state tensor for a subset of actors using <code class="language-plaintext highlighter-rouge">set_actor_dof_state_tensor_indexed</code>.</p> <h3 id="424-rigid-body-states"> <a href="#424-rigid-body-states" class="anchor-heading" aria-labelledby="424-rigid-body-states"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 4.2.4 Rigid Body States </h3> <p>Rigid body states contains state of all rigid bodies in simulation. Each rigid body has 13-dimensional state vector [position, quaternion, linear velocity, angular velocity].</p> <p>We can get total number of rigid bodies using <code class="language-plaintext highlighter-rouge">gym.get_sim_rigid_body_count(sim)</code>.</p> <p>We can get rigid body states from an actor using <code class="language-plaintext highlighter-rouge">gym.get_actor_rigid_body_states</code>.</p> <p>We can get actor index using <code class="language-plaintext highlighter-rouge">gym.get_actor_rigid_body_index</code> or <code class="language-plaintext highlighter-rouge">gym.find_actor_rigid_body_index</code>.</p> <p>We can get rigid body states using <code class="language-plaintext highlighter-rouge">gym.acquire_rigid_body_state_tensor(sim)</code>. Which will need to by wrapped using <code class="language-plaintext highlighter-rouge">gymtorch.wrap_tensor</code>.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">_rb_states</span> <span class="o">=</span> <span class="n">gym</span><span class="p">.</span><span class="n">acquire_rigid_body_state_tensor</span><span class="p">(</span><span class="n">sim</span><span class="p">)</span>
<span class="n">rb_states</span> <span class="o">=</span> <span class="n">gymtorch</span><span class="p">.</span><span class="n">wrap_tensor</span><span class="p">(</span><span class="n">_rb_states</span><span class="p">)</span>
</code></pre></div></div> <p>We can populate tensor using <code class="language-plaintext highlighter-rouge">gym.refresh_rigid_body_state_tensor(sim)</code>.</p> <h3 id="425-jacobian-and-mass-matrices"> <a href="#425-jacobian-and-mass-matrices" class="anchor-heading" aria-labelledby="425-jacobian-and-mass-matrices"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 4.2.5 Jacobian and Mass Matrices </h3> <p>In order to get these, you need the name of the actor which is provided when calling <code class="language-plaintext highlighter-rouge">create_actor</code>.</p> <p>Once you have the name, you can use the following to get the Jacobian and Mass Matrix:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">_jacobian</span>   <span class="o">=</span> <span class="n">gym</span><span class="p">.</span><span class="n">acquire_jacobian_tensor</span><span class="p">(</span><span class="n">sim</span><span class="p">,</span> <span class="s">"franka"</span><span class="p">)</span>
<span class="n">_massmatrix</span> <span class="o">=</span> <span class="n">gym</span><span class="p">.</span><span class="n">acquire_mass_matrix_tensor</span><span class="p">(</span><span class="n">sim</span><span class="p">,</span> <span class="s">"franka"</span><span class="p">)</span>

<span class="c1"># wrap tensor 
</span><span class="n">jacobian</span>    <span class="o">=</span> <span class="n">gymtorch</span><span class="p">.</span><span class="n">wrap_tensor</span><span class="p">(</span><span class="n">_jacobian</span><span class="p">)</span>
<span class="n">mass_matrix</span> <span class="o">=</span> <span class="n">gymtorch</span><span class="p">.</span><span class="n">wrap_tensor</span><span class="p">(</span><span class="n">_massmatrix</span><span class="p">)</span>
</code></pre></div></div> <p>to refresh we call the following:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">gym</span><span class="p">.</span><span class="n">refresh_jacobian_tensors</span><span class="p">(</span><span class="n">sim</span><span class="p">,</span> <span class="s">"franka"</span><span class="p">)</span>
<span class="n">gym</span><span class="p">.</span><span class="n">refresh_mass_matrix_tensors</span><span class="p">(</span><span class="n">sim</span><span class="p">,</span> <span class="s">"franka"</span><span class="p">)</span>
</code></pre></div></div> <p>Shape of Mass Matrix is (num_dofs, num_dofs). Shape of Mass Matrix Tensor is (num_envs, num_dofs, num_dofs).</p> <p>Shape of jacobian depends on number of links, fixed-base or floating-base, and DOFs. Each body has 6 rows in jacobian representing linear and angular motions. The column represents the DOFs.</p> <p>If actor base is floating, Jacobian shape is (num_envs, num_links, 6, num_dofs + 6). The first 6 columns are the base DOFs.</p> <p>Here’s an example of looking up jacobian of a link:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">link_dict</span> <span class="o">=</span> <span class="n">gym</span><span class="p">.</span><span class="n">get_asset_rigid_body_dict</span><span class="p">(</span><span class="n">franka_asset</span><span class="p">)</span>
<span class="n">dof_dict</span> <span class="o">=</span> <span class="n">gym</span><span class="p">.</span><span class="n">get_asset_dof_dict</span><span class="p">(</span><span class="n">franka_asset</span><span class="p">)</span>

<span class="n">link_index</span> <span class="o">=</span> <span class="n">link_dict</span><span class="p">[</span><span class="s">"panda_hand"</span><span class="p">]</span>
<span class="n">dof_index</span> <span class="o">=</span> <span class="n">dof_dict</span><span class="p">[</span><span class="s">"panda_joint5"</span><span class="p">]</span>

<span class="c1"># for all envs:
</span><span class="n">jacobian</span><span class="p">[:,</span> <span class="n">link_index</span><span class="p">,</span> <span class="p">:,</span> <span class="n">dof_index</span> <span class="o">+</span> <span class="mi">6</span><span class="p">]</span>

<span class="c1"># for a specific env:
</span><span class="n">jacobian</span><span class="p">[</span><span class="n">env_index</span><span class="p">,</span> <span class="n">link_index</span><span class="p">,</span> <span class="p">:,</span> <span class="n">dof_index</span> <span class="o">+</span> <span class="mi">6</span><span class="p">]</span>
</code></pre></div></div> <p>If base is fixed, we don’t have those extra 6 columns. Thus, the shape is (num_envs, num_links - 1, 6, num_dofs).</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># for all envs:
</span><span class="n">jacobian</span><span class="p">[:,</span> <span class="n">link_index</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="p">:,</span> <span class="n">dof_index</span><span class="p">]</span>

<span class="c1"># for a specific env:
</span><span class="n">jacobian</span><span class="p">[</span><span class="n">env_index</span><span class="p">,</span> <span class="n">link_index</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="p">:,</span> <span class="n">dof_index</span><span class="p">]</span>
</code></pre></div></div> <h3 id="43-contact-tensors"> <a href="#43-contact-tensors" class="anchor-heading" aria-labelledby="43-contact-tensors"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 4.3 Contact Tensors </h3> <p>We can call the net contact forces experienced by each rigid body during last sim step. This is not each individual contact force, but the net force applied to the rigid body.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">_net_cf</span> <span class="o">=</span> <span class="n">gym</span><span class="p">.</span><span class="n">acquire_net_contact_force_tensor</span><span class="p">(</span><span class="n">sim</span><span class="p">)</span>
<span class="n">net_cf</span> <span class="o">=</span> <span class="n">gymtorch</span><span class="p">.</span><span class="n">wrap_tensor</span><span class="p">(</span><span class="n">_net_cf</span><span class="p">)</span>

<span class="c1"># netcf shape: (num_rigid_bodies, 3)
</span>
<span class="n">gym</span><span class="p">.</span><span class="n">refresh_net_contact_force_tensor</span><span class="p">(</span><span class="n">sim</span><span class="p">)</span>
</code></pre></div></div> <h3 id="44-control-tensors"> <a href="#44-control-tensors" class="anchor-heading" aria-labelledby="44-control-tensors"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 4.4 Control Tensors </h3> <p>We show how to apply actions to simulation using tensor API.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># get total number of DOFs
</span><span class="n">num_dofs</span> <span class="o">=</span> <span class="n">gym</span><span class="p">.</span><span class="n">get_sim_dof_count</span><span class="p">(</span><span class="n">sim</span><span class="p">)</span>

<span class="c1"># generate a PyTorch tensor with a random force for each DOF
</span><span class="n">actions</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">-</span> <span class="mf">2.0</span> <span class="o">*</span> <span class="n">torch</span><span class="p">.</span><span class="n">rand</span><span class="p">(</span><span class="n">num_dofs</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">torch</span><span class="p">.</span><span class="n">float32</span><span class="p">,</span> <span class="n">device</span><span class="o">=</span><span class="s">"cuda:0"</span><span class="p">)</span>

<span class="c1"># apply the forces
</span><span class="n">gym</span><span class="p">.</span><span class="n">set_dof_actuation_force_tensor</span><span class="p">(</span><span class="n">sim</span><span class="p">,</span> <span class="n">gymtorch</span><span class="p">.</span><span class="n">unwrap_tensor</span><span class="p">(</span><span class="n">actions</span><span class="p">))</span>
</code></pre></div></div> <p>Actuation forces will only be applied for DOFs whose driveMode was set to <code class="language-plaintext highlighter-rouge">DOF_MODE_EFFORT</code>.</p> <p>We can also run <code class="language-plaintext highlighter-rouge">set_dof_position_target_tensor</code> or <code class="language-plaintext highlighter-rouge">set_dof_velocity_target_tensor</code> depending on our drive mode.</p> <p>We can apply forces to rigid bodies using <code class="language-plaintext highlighter-rouge">apply_rigid_body_force_tensors</code>.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># apply both forces and torques
</span><span class="n">gym</span><span class="p">.</span><span class="n">apply_rigid_body_force_tensors</span><span class="p">(</span><span class="n">sim</span><span class="p">,</span> <span class="n">force_tensor</span><span class="p">,</span> <span class="n">torque_tensor</span><span class="p">,</span> <span class="n">gymapi</span><span class="p">.</span><span class="n">ENV_SPACE</span><span class="p">)</span>

<span class="c1"># apply only forces
</span><span class="n">gym</span><span class="p">.</span><span class="n">apply_rigid_body_force_tensors</span><span class="p">(</span><span class="n">sim</span><span class="p">,</span> <span class="n">force_tensor</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="n">gymapi</span><span class="p">.</span><span class="n">ENV_SPACE</span><span class="p">)</span>

<span class="c1"># apply only torques
</span><span class="n">gym</span><span class="p">.</span><span class="n">apply_rigid_body_force_tensors</span><span class="p">(</span><span class="n">sim</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="n">torque_tensor</span><span class="p">,</span> <span class="n">gymapi</span><span class="p">.</span><span class="n">ENV_SPACE</span><span class="p">)</span>
</code></pre></div></div> <h3 id="45-common-problem-tensor-lifetime"> <a href="#45-common-problem-tensor-lifetime" class="anchor-heading" aria-labelledby="45-common-problem-tensor-lifetime"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 4.5 Common Problem (Tensor Lifetime) </h3> <p>Tensor in PyTorch are subject to garbage collection. Gym C++ runtime is not conected with python interpreter, so it doesn’t participate in the reference counting of objects. We should be careful to make sure objects are not garbage-collected.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">indices_torch</span> <span class="o">=</span> <span class="n">torch</span><span class="p">.</span><span class="n">LongTensor</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">42</span><span class="p">])</span>
<span class="n">indices_gym</span> <span class="o">=</span> <span class="n">gymtorch</span><span class="p">.</span><span class="n">unwrap_tensor</span><span class="p">(</span><span class="n">indices_torch</span><span class="p">.</span><span class="n">to</span><span class="p">(</span><span class="n">torch</span><span class="p">.</span><span class="n">int32</span><span class="p">))</span>
<span class="n">set_actor_root_state_tensor_indexed</span><span class="p">(</span><span class="n">sim</span><span class="p">,</span> <span class="n">states</span><span class="p">,</span> <span class="n">indices_gym</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
</code></pre></div></div> <p>This doesn’t seem like an issue, but <code class="language-plaintext highlighter-rouge">indices_torch.to(torch.int32)</code> will be garbage collected since there is no reference to it. This is because gymtorch.unwreap_tensor does not participate in the reference counting.</p> <p>Instead, we should do the following:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">indices_torch</span> <span class="o">=</span> <span class="n">torch</span><span class="p">.</span><span class="n">LongTensor</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">42</span><span class="p">])</span>
<span class="n">indices_torch32</span> <span class="o">=</span> <span class="n">indices_torch</span><span class="p">.</span><span class="n">to</span><span class="p">(</span><span class="n">torch</span><span class="p">.</span><span class="n">int32</span><span class="p">)</span> <span class="c1"># &lt;--- this reference will keep the tensor alive
</span><span class="n">set_actor_root_state_tensor_indexed</span><span class="p">(</span><span class="n">sim</span><span class="p">,</span> <span class="n">states</span><span class="p">,</span> <span class="n">gymtorch</span><span class="p">.</span><span class="n">unwrap_tensor</span><span class="p">(</span><span class="n">indices_torch32</span><span class="p">),</span> <span class="mi">3</span><span class="p">)</span>
</code></pre></div></div> <p>now <code class="language-plaintext highlighter-rouge">indices_torch.to(torch.int32)</code> will not be garbage collected since <code class="language-plaintext highlighter-rouge">indices_torch32</code> is referencing it.</p> <h3 id="46-limitations"> <a href="#46-limitations" class="anchor-heading" aria-labelledby="46-limitations"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 4.6 Limitations </h3> <p>Only supported for PhysX backend.</p> <p>A tensor “setter” function should only be called once per step such as <code class="language-plaintext highlighter-rouge">set_actor_root_state_tensor</code>. We can call other setter functions, but only once per function.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">gym</span><span class="p">.</span><span class="n">set_actor_root_state_tensor_indexed</span><span class="p">(</span><span class="n">sim</span><span class="p">,</span> <span class="n">root_states</span><span class="p">,</span> <span class="n">indices1</span><span class="p">,</span> <span class="n">n1</span><span class="p">)</span>
<span class="n">gym</span><span class="p">.</span><span class="n">set_actor_root_state_tensor_indexed</span><span class="p">(</span><span class="n">sim</span><span class="p">,</span> <span class="n">root_states</span><span class="p">,</span> <span class="n">indices2</span><span class="p">,</span> <span class="n">n2</span><span class="p">)</span>
</code></pre></div></div> <p>this is no-no.</p> <p>Also only call <code class="language-plaintext highlighter-rouge">refresh</code> functions once per step, and it should be called before any “setter” functions.</p> <p>If we call refresh after, we will only get stale data in the next loop. Keep that in mind.</p><hr /> <h2 id="5-force-sensors"> <a href="#5-force-sensors" class="anchor-heading" aria-labelledby="5-force-sensors"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 5. Force Sensors </h2> <h3 id="51-rigid-body-force-sensors"> <a href="#51-rigid-body-force-sensors" class="anchor-heading" aria-labelledby="51-rigid-body-force-sensors"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 5.1 Rigid Body Force Sensors </h3> <p>We can attach force sensors to rigid bodies to measure forces and torques. The readings are net forces and torques acting on parent body which include external forces, contact forces, and internal forces (joint drives). Body resting on ground plane will have a net force of zero.</p> <p>Force sensors are created on assets. To create force sensor, you specify rigid body index where sensor is attached and relative poes of the sensor with respect to body origin.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">body_idx</span> <span class="o">=</span> <span class="n">gym</span><span class="p">.</span><span class="n">find_actor_rigid_body_index</span><span class="p">(</span><span class="n">asset</span><span class="p">,</span> <span class="s">"bodyName"</span><span class="p">)</span>

<span class="n">sensor_pose1</span> <span class="o">=</span> <span class="n">gymapi</span><span class="p">.</span><span class="n">Transform</span><span class="p">(</span><span class="n">gymapi</span><span class="p">.</span><span class="n">Vec3</span><span class="p">(</span><span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">))</span>
<span class="n">sensor_pose2</span> <span class="o">=</span> <span class="n">gymapi</span><span class="p">.</span><span class="n">Transform</span><span class="p">(</span><span class="n">gymapi</span><span class="p">.</span><span class="n">Vec3</span><span class="p">(</span><span class="o">-</span><span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">))</span>

<span class="n">sensor_idx1</span> <span class="o">=</span> <span class="n">gym</span><span class="p">.</span><span class="n">create_asset_force_sensor</span><span class="p">(</span><span class="n">asset</span><span class="p">,</span> <span class="n">body_idx</span><span class="p">,</span> <span class="n">sensor_pose1</span><span class="p">)</span>
<span class="n">sensor_idx2</span> <span class="o">=</span> <span class="n">gym</span><span class="p">.</span><span class="n">create_asset_force_sensor</span><span class="p">(</span><span class="n">asset</span><span class="p">,</span> <span class="n">body_idx</span><span class="p">,</span> <span class="n">sensor_pose2</span><span class="p">)</span>
</code></pre></div></div> <p>You can also pass additional properties to sensor:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">sensor_props</span> <span class="o">=</span> <span class="n">gymapi</span><span class="p">.</span><span class="n">ForceSensorProperties</span><span class="p">()</span>
<span class="n">sensor_props</span><span class="p">.</span><span class="n">enable_forward_dynamics_forces</span> <span class="o">=</span> <span class="bp">True</span>
<span class="n">sensor_props</span><span class="p">.</span><span class="n">enable_constraint_solver_forces</span> <span class="o">=</span> <span class="bp">True</span> 
<span class="n">sensor_props</span><span class="p">.</span><span class="n">use_world_frame</span> <span class="o">=</span> <span class="bp">True</span>

<span class="n">sensor_idx</span> <span class="o">=</span> <span class="n">gym</span><span class="p">.</span><span class="n">create_asset_force_sensor</span><span class="p">(</span><span class="n">asset</span><span class="p">,</span> <span class="n">body_idx</span><span class="p">,</span> <span class="n">sensor_pose</span><span class="p">,</span> <span class="n">sensor_props</span><span class="p">)</span>
</code></pre></div></div> <p>After constructing these guys, you can access individual force sensors using index:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">actor_handle</span> <span class="o">=</span> <span class="n">gym</span><span class="p">.</span><span class="n">create_actor</span><span class="p">(</span><span class="n">env</span><span class="p">,</span> <span class="n">asset</span><span class="p">,</span> <span class="p">...)</span>
<span class="n">num_sensors</span>  <span class="o">=</span> <span class="n">gym</span><span class="p">.</span><span class="n">get_actor_force_sensor_count</span><span class="p">(</span><span class="n">env</span><span class="p">,</span> <span class="n">actor_handle</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_sensors</span><span class="p">):</span>
    <span class="n">sensor</span> <span class="o">=</span> <span class="n">gym</span><span class="p">.</span><span class="n">get_actor_force_sensor</span><span class="p">(</span><span class="n">env</span><span class="p">,</span> <span class="n">actor_handle</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
</code></pre></div></div> <p>During simulation, you can query latest sensor readings:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">sensor_data</span> <span class="o">=</span> <span class="n">sensor</span><span class="p">.</span><span class="n">get_forces</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="n">sensor_data</span><span class="p">.</span><span class="n">force</span><span class="p">)</span> <span class="c1">#Vec3
</span><span class="k">print</span><span class="p">(</span><span class="n">sensor_data</span><span class="p">.</span><span class="n">torque</span><span class="p">)</span> <span class="c1">#Vec3
</span></code></pre></div></div> <p>Get total number of force sensors <code class="language-plaintext highlighter-rouge">gym.get_sim_force_sensor_count(sim)</code>.</p> <h3 id="511-tensor-api"> <a href="#511-tensor-api" class="anchor-heading" aria-labelledby="511-tensor-api"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 5.1.1 Tensor API </h3> <p>We can get a Gym tensor descriptor for all force sensors in simulation using <code class="language-plaintext highlighter-rouge">gym.acquire_force_sensor_tensor(sim)</code>.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">_fsdata</span> <span class="o">=</span> <span class="n">gym</span><span class="p">.</span><span class="n">acquire_force_sensor_tensor</span><span class="p">(</span><span class="n">sim</span><span class="p">)</span>
<span class="n">fsdata</span> <span class="o">=</span> <span class="n">gymtorch</span><span class="p">.</span><span class="n">wrap_tensor</span><span class="p">(</span><span class="n">_fsdata</span><span class="p">)</span>
</code></pre></div></div> <p>The shape of this tensor is (num_force_sensors, 6) and data type is float32. The first 3 floats are force and last 3 are torque.</p> <p>After each sim step, you can get latest sensor readings calling <code class="language-plaintext highlighter-rouge">gym.refresh_force_sensor_tensor(sim)</code>.</p> <h3 id="52-joint-force-sensors"> <a href="#52-joint-force-sensors" class="anchor-heading" aria-labelledby="52-joint-force-sensors"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 5.2 Joint Force Sensors </h3> <p>This is easier to do. Just call <code class="language-plaintext highlighter-rouge">enable_actor_dof_force_sensors</code> after creating the actor.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">actor</span> <span class="o">=</span> <span class="n">gym</span><span class="p">.</span><span class="n">create_actor</span><span class="p">(</span><span class="n">env</span><span class="p">,</span> <span class="p">...)</span>
<span class="n">gym</span><span class="p">.</span><span class="n">enable_actor_dof_force_sensors</span><span class="p">(</span><span class="n">env</span><span class="p">,</span> <span class="n">actor</span><span class="p">)</span>
</code></pre></div></div> <p>During simulation, we retrieve forces using <code class="language-plaintext highlighter-rouge">get_actor_dof_forces</code>.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">forces</span> <span class="o">=</span> <span class="n">gym</span><span class="p">.</span><span class="n">get_actor_dof_forces</span><span class="p">(</span><span class="n">env</span><span class="p">,</span> <span class="n">actor_handle</span><span class="p">)</span>
</code></pre></div></div> <p>This returns numpy array of total forces acting on this actor’s DOFF.</p> <p>These forces will be zero if we do not enable joint force sensors.</p> <h3 id="521-tensor-api"> <a href="#521-tensor-api" class="anchor-heading" aria-labelledby="521-tensor-api"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 5.2.1 Tensor API </h3> <p>We can also use the tensor API to get forces.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">_forces</span> <span class="o">=</span> <span class="n">gym</span><span class="p">.</span><span class="n">acquire_dof_force_tensor</span><span class="p">(</span><span class="n">sim</span><span class="p">)</span>
<span class="n">forces</span>  <span class="o">=</span> <span class="n">gymtorch</span><span class="p">.</span><span class="n">wrap_tensor</span><span class="p">(</span><span class="n">_forces</span><span class="p">)</span>
</code></pre></div></div> <p>This is a 1-dim tensor of float32 corresponding to each DOF in simulation. We can get latest sensor reading by calling <code class="language-plaintext highlighter-rouge">gym.refresh_dof_force_tensor(sim)</code>.</p> <p><b> DOF force sensors are only available for PhysX backend. </b></p><hr /> <h2 id="6-graphics-and-camera-sensors"> <a href="#6-graphics-and-camera-sensors" class="anchor-heading" aria-labelledby="6-graphics-and-camera-sensors"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 6. Graphics and Camera Sensors </h2> <p>The point of this section is to show how to add camera sensors into our setup.</p> <h3 id="61-camera-properties"> <a href="#61-camera-properties" class="anchor-heading" aria-labelledby="61-camera-properties"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 6.1 Camera Properties </h3> <p>All cameras can be created with parameters passed in GymCameraProperties.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">viewer</span> <span class="o">=</span> <span class="n">gym</span><span class="p">.</span><span class="n">create_viewer</span><span class="p">(</span><span class="n">sim</span><span class="p">,</span> <span class="n">gymapi</span><span class="p">.</span><span class="n">CameraProperties</span><span class="p">())</span>

<span class="p">...</span>

<span class="n">camera_props</span> <span class="o">=</span> <span class="n">gymapi</span><span class="p">.</span><span class="n">CameraProperties</span><span class="p">()</span>
<span class="n">camera_props</span><span class="p">.</span><span class="n">horizontal_fov</span> <span class="o">=</span> <span class="mf">75.0</span> <span class="c1"># degrees
</span><span class="n">camera_props</span><span class="p">.</span><span class="n">width</span> <span class="o">=</span> <span class="mi">1920</span>
<span class="n">camera_props</span><span class="p">.</span><span class="n">height</span> <span class="o">=</span> <span class="mi">1080</span>
<span class="n">viewer</span> <span class="o">=</span> <span class="n">gym</span><span class="p">.</span><span class="n">create_viewer</span><span class="p">(</span><span class="n">sim</span><span class="p">,</span> <span class="n">camera_props</span><span class="p">)</span>
</code></pre></div></div> <h3 id="62-camera-sensors"> <a href="#62-camera-sensors" class="anchor-heading" aria-labelledby="62-camera-sensors"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 6.2 Camera Sensors </h3> <p>Camera sensors are meant to simulate cameras as if they were an actual sensor. They are not meant to be used for rendering.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">camera_props</span> <span class="o">=</span> <span class="n">gymapi</span><span class="p">.</span><span class="n">CameraProperties</span><span class="p">()</span>
<span class="n">camera_props</span><span class="p">.</span><span class="n">width</span>  <span class="o">=</span> <span class="mi">128</span>
<span class="n">camera_props</span><span class="p">.</span><span class="n">height</span> <span class="o">=</span> <span class="mi">128</span>
<span class="n">camera_handle</span> <span class="o">=</span> <span class="n">gym</span><span class="p">.</span><span class="n">create_camera_sensor</span><span class="p">(</span><span class="n">env</span><span class="p">,</span> <span class="n">camera_props</span><span class="p">)</span>
</code></pre></div></div> <p>We can set the camera location using <code class="language-plaintext highlighter-rouge">set_camera_location</code>:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">gym</span><span class="p">.</span><span class="n">set_camera_location</span><span class="p">(</span><span class="n">camera_handle</span><span class="p">,</span> <span class="n">env</span><span class="p">,</span> <span class="n">gymapi</span><span class="p">.</span><span class="n">Vec3</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span><span class="p">),</span> <span class="n">gymapi</span><span class="p">.</span><span class="n">Vec3</span><span class="p">(</span><span class="n">tx</span><span class="p">,</span><span class="n">ty</span><span class="p">,</span><span class="n">tz</span><span class="p">))</span>
</code></pre></div></div> <p>where <code class="language-plaintext highlighter-rouge">(x,y,z)</code> is the camera position and <code class="language-plaintext highlighter-rouge">(tx,ty,tz)</code> is position camera is looking at. All of this is in environment local coordinates.</p> <p>The method I like more is to specify <code class="language-plaintext highlighter-rouge">GymTransform</code>:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">transform</span> <span class="o">=</span> <span class="n">gymapi</span><span class="p">.</span><span class="n">Transform</span><span class="p">()</span>
<span class="n">transform</span><span class="p">.</span><span class="n">p</span> <span class="o">=</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span><span class="p">)</span>
<span class="n">transform</span><span class="p">.</span><span class="n">r</span> <span class="o">=</span> <span class="n">gymapi</span><span class="p">.</span><span class="n">Quat</span><span class="p">.</span><span class="n">from_axis_angle</span><span class="p">(</span><span class="n">gymapi</span><span class="p">.</span><span class="n">Vec3</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="n">np</span><span class="p">.</span><span class="n">radians</span><span class="p">(</span><span class="mf">45.0</span><span class="p">))</span>
<span class="n">gym</span><span class="p">.</span><span class="n">set_camera_transform</span><span class="p">(</span><span class="n">camera_handle</span><span class="p">,</span> <span class="n">env</span><span class="p">,</span> <span class="n">body_handle</span><span class="p">,</span> <span class="n">transform</span><span class="p">,</span> <span class="n">gymapi</span><span class="p">.</span><span class="n">FOLLOW_TRANSFORM</span><span class="p">)</span>
</code></pre></div></div> <p>Last argument determines attachment behavior.</p> <ul> <li><code class="language-plaintext highlighter-rouge">gymapi.FOLLOW_POSITION</code> - camera maintains fixed offset from rigid body but will not rotate.</li> <li><code class="language-plaintext highlighter-rouge">gymapi.FOLLOW_TRANSFORM</code> - camera maintains fixed transform relative to rigid body.</li> </ul> <p>if we don’t specify, the camera will be fixed in world space.</p> <p>All cameras are rendered together in one API cal.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">gym</span><span class="p">.</span><span class="n">render_all_camera_sensors</span><span class="p">(</span><span class="n">sim</span><span class="p">)</span>
</code></pre></div></div> <p>We can access camera image using <code class="language-plaintext highlighter-rouge">get_camera_image</code>:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">color_image</span> <span class="o">=</span> <span class="n">gym</span><span class="p">.</span><span class="n">get_camera_image</span><span class="p">(</span><span class="n">sim</span><span class="p">,</span> <span class="n">camera_handle</span><span class="p">,</span> <span class="n">gymapi</span><span class="p">.</span><span class="n">IMAGE_COLOR</span><span class="p">)</span>
<span class="n">depth_image</span> <span class="o">=</span> <span class="n">gym</span><span class="p">.</span><span class="n">get_camera_image</span><span class="p">(</span><span class="n">sim</span><span class="p">,</span> <span class="n">camera_handle</span><span class="p">,</span> <span class="n">gymapi</span><span class="p">.</span><span class="n">IMAGE_DEPTH</span><span class="p">)</span>
<span class="n">seg_image</span> <span class="o">=</span> <span class="n">gym</span><span class="p">.</span><span class="n">get_camera_image</span><span class="p">(</span><span class="n">sim</span><span class="p">,</span> <span class="n">camera_handle</span><span class="p">,</span> <span class="n">gymapi</span><span class="p">.</span><span class="n">IMAGE_SEGMENTATION</span><span class="p">)</span>
<span class="n">optical_flow_image</span> <span class="o">=</span> <span class="n">gym</span><span class="p">.</span><span class="n">get_camera_image</span><span class="p">(</span><span class="n">sim</span><span class="p">,</span> <span class="n">camera_handle</span><span class="p">,</span> <span class="n">gymapi</span><span class="p">.</span><span class="n">IMAGE_OPTICAL_FLOW</span><span class="p">)</span>
</code></pre></div></div> <p>One key thing is to keep the camera stuff in GPU.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">camera_props</span> <span class="o">=</span> <span class="n">gymapi</span><span class="p">.</span><span class="n">CameraProperties</span><span class="p">()</span>
<span class="n">camera_props</span><span class="p">.</span><span class="n">enable_tensors</span> <span class="o">=</span> <span class="bp">True</span>
<span class="n">cam_handle</span> <span class="o">=</span> <span class="n">gym</span><span class="p">.</span><span class="n">create_camera_sensor</span><span class="p">(</span><span class="n">env</span><span class="p">,</span> <span class="n">camera_props</span><span class="p">)</span>
</code></pre></div></div> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">camera_tensor</span> <span class="o">=</span> <span class="n">gym</span><span class="p">.</span><span class="n">get_camera_image_gpu_tensor</span><span class="p">(</span><span class="n">sim</span><span class="p">,</span> <span class="n">env</span><span class="p">,</span> <span class="n">cam_handle</span><span class="p">,</span> <span class="n">gymapi</span><span class="p">.</span><span class="n">IMAGE_COLOR</span><span class="p">)</span>
<span class="n">torch_camera_tensor</span> <span class="o">=</span> <span class="n">gymtorch</span><span class="p">.</span><span class="n">wrap_tensor</span><span class="p">(</span><span class="n">camera_tensor</span><span class="p">)</span>
</code></pre></div></div> <p>this allows us to get the camera image as a tensor and use it in PyTorch.</p> <p>Here is a loop for cameras when using simulation in isaacgym:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">while</span> <span class="bp">True</span><span class="p">:</span>

    <span class="n">gym</span><span class="p">.</span><span class="n">simulate</span><span class="p">(</span><span class="n">sim</span><span class="p">)</span>
    <span class="n">gym</span><span class="p">.</span><span class="n">fetch_results</span><span class="p">(</span><span class="n">sim</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>
    <span class="n">gym</span><span class="p">.</span><span class="n">step_graphics</span><span class="p">(</span><span class="n">sim</span><span class="p">)</span>
    <span class="n">gym</span><span class="p">.</span><span class="n">render_all_camera_sensors</span><span class="p">(</span><span class="n">sim</span><span class="p">)</span>
    <span class="n">gym</span><span class="p">.</span><span class="n">start_access_image_tensors</span><span class="p">(</span><span class="n">sim</span><span class="p">)</span>
    <span class="c1">#
</span>    <span class="c1"># User code to digest tensors
</span>    <span class="c1">#
</span>    <span class="n">gym</span><span class="p">.</span><span class="n">end_access_image_tensors</span><span class="p">(</span><span class="n">sim</span><span class="p">)</span>
</code></pre></div></div><hr /> <h2 id="python-api"> <a href="#python-api" class="anchor-heading" aria-labelledby="python-api"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Python API </h2> <ul> <li>Checkout IsaacGym_Preview_TacSL_Package/isaacgym/docs/api/python/gym_py.html</li> </ul> </main> <hr> <footer> <p class="text-small text-grey-dk-100 mb-0">By An Dang.</p> <div class="d-flex mt-2"> <p class="text-small text-grey-dk-000 mb-0"> <a href="https://github.com/dangthanhan507/dangthanhan507.github.io/blob/master/code-notes/isaac/doc_notes.md" id="edit-this-page">Edit this page on GitHub.</a> </p> </div> </footer> </div> </div> <div class="search-overlay"></div> </div> <script type="module"> import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@11.6.0/dist/mermaid.esm.min.mjs'; var config = {} ; mermaid.initialize(config); mermaid.run({ querySelector: '.language-mermaid', }); </script> </body> </html>
